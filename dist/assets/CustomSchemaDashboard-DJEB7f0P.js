import{r as t,u as y,c as B,a as k,b as A,ai as E,j as e,C as $,f as L,g as z,h as H,w as _,I as F,B as i,i as I,D as h,k as M,l as j,m as u,E as R}from"./index-C8rB76ST.js";/* empty css                     */import{T as q,a as P,b as p,c as l,d as U,e as r}from"./table-CiOR24WC.js";import{T as G}from"./table-BBO-BYv9.js";import{S as J}from"./square-pen-CNvIA_LH.js";import{S as K}from"./settings-CIWBEx2x.js";const le=()=>{const[n,N]=t.useState(""),c=y(),[f,O]=t.useState(0),[Q,V]=t.useState(!0),[W,X]=t.useState([]),[g,w]=t.useState([]),b=["team_member","schema_migrations","reminders"],C=new Set(b),v={},S=B(),d=k(s=>s.user);d.id;const T=d.schema_name;t.useEffect(()=>{D()},[]);const D=async()=>{const s=`https://click.wa.expert/api/data/getAllTables?schemaName=${T}`,{data:a}=await A.get(s);w(a.data),S(E({tables:a.data}))},m=g.filter(s=>{const a=(s==null?void 0:s.title)||s;return!C.has(a)}).filter(s=>s.title.toLowerCase().includes(n.toLowerCase())),o=s=>{const a=new Date(s);return{date:a.toLocaleDateString(),time:a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}};return e.jsx(e.Fragment,{children:e.jsxs($,{className:"tableCard shadow-sm border-slate-200 mx-[6rem]",children:[e.jsx(L,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-2xl font-semibold text-slate-700",children:"All Custom Tables"}),e.jsx(H,{className:"mt-1",children:"Manage your data stores and schemas"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400"}),e.jsx(F,{type:"text",placeholder:"Search data store...",value:n,onChange:s=>N(s.target.value),className:"pl-9 w-full sm:w-[250px]"})]}),e.jsxs(i,{className:"gap-2 bg-[#4285B4] hover:bg-[#3778b4]",onClick:()=>c("/db/custom/capture"),children:[e.jsx(G,{className:"h-4 w-4"})," Create Table"]})]})]})}),e.jsxs(I,{children:[v[f]||null,e.jsxs(q,{children:[e.jsx(P,{children:e.jsxs(p,{children:[e.jsx(l,{children:"Schema Title"}),e.jsx(l,{className:"text-center",children:"Number of Fields"}),e.jsx(l,{children:"Created at"}),e.jsx(l,{children:"Last Updated at"}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(U,{children:m.map(s=>{const a=o(s.createdAt),x=o(s.updatedAt);return e.jsxs(p,{children:[e.jsx(r,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center h-9 w-9 rounded bg-[#4285B4]/10",children:e.jsx(h,{className:"h-4 w-4 text-[#4285B4]"})}),s.title]})}),e.jsx(r,{className:"text-center",children:e.jsxs(M,{variant:"outline",className:"bg-slate-50",children:[s.fieldsCount," fields"]})}),e.jsxs(r,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:a.date})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-2 ml-6",children:[e.jsx(u,{className:"h-3 w-3"}),a.time]})]}),e.jsxs(r,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:x.date})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-2 ml-6",children:[e.jsx(u,{className:"h-3 w-3"}),x.time]})]}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Browse",onClick:()=>c(`/${s.title}/record`),children:e.jsx(R,{className:"h-4 w-4 text-slate-600"})}),e.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Edit",onClick:()=>c(`/db/custom/capture/${s.title}`),children:e.jsx(J,{className:"h-4 w-4 text-slate-600"})}),e.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Setup",onClick:()=>c(`/db/setup/${s.title}`),children:e.jsx(K,{className:"h-4 w-4 text-red-500"})})]})})]},s.id)})})]}),m.length===0&&e.jsxs("div",{className:"text-center py-12 text-slate-500",children:[e.jsx(h,{className:"h-12 w-12 mx-auto mb-4 text-slate-300"}),e.jsx("p",{children:"No data stores found"}),e.jsx("p",{className:"text-sm mt-2",children:"Try a different search term or create a new data store"})]})]})]})})};export{le as default};
