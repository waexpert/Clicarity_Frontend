var rs=Object.defineProperty;var as=(a,r,n)=>r in a?rs(a,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[r]=n;var Rt=(a,r,n)=>as(a,typeof r!="symbol"?r+"":r,n);import{e as nt,R as et,j as e,C as $t,g as Ut,h as zt,k as qt,B as te,a0 as ns,c as we,r as o,a1 as G,a as wt,L as Be,I as Fe,i as is,l as Se,x as ls,o as pt,p as mt,q as xt,t as gt,v as Ke,a9 as Bt,aa as Ht,ab as Vt,ac as Ct,aE as Dt,ad as jt,aF as Wt,aD as os,aB as Gt,_ as it,$ as cs,ar as ds,ak as us}from"./index-DYCf_Aje.js";import{S as hs}from"./switch-COgDczG3.js";import{S as fs}from"./save-Cp8aHBSJ.js";import{R as Kt}from"./refresh-cw-ombwXhvR.js";import{A as ps}from"./CustomTable-h_xZJANS.js";import{D as Nt,b as vt,c as tt,d as st,f as rt,e as ht}from"./dialog-n_8qfNF1.js";import{P as ms}from"./plus-BXcEjKg9.js";import{S as xs}from"./square-pen-BM9u3oQA.js";import{C as Xt}from"./checkbox-BZg_ZJOo.js";import{S as gs}from"./sliders-horizontal-DIaceDps.js";import{T as bs,a as ws,b as ct,c as Ot,d as ys,e as dt}from"./table-BSLyywGy.js";import{T as Yt}from"./trash-2-BGaPhHFC.js";import{T as _s}from"./textarea-DzCTI0AU.js";import{C as Cs}from"./chevron-left-DwAcS4Wc.js";import"./index-6hE3n7ZW.js";import"./x-BhLyI3FR.js";/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Ss=nt("file-spreadsheet",js);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vs=nt("file-text",Ns);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ks=nt("funnel",Es);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Ds=nt("split",Rs);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ts=nt("triangle-alert",Os);class As extends et.Component{constructor(n){super(n);Rt(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,i){this.setState({error:n,errorInfo:i})}render(){return this.state.hasError?e.jsxs($t,{className:"mx-[6rem] mt-8",children:[e.jsx(Ut,{children:e.jsxs(zt,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Ts,{className:"h-5 w-5"}),"Something went wrong"]})}),e.jsxs(qt,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"The table encountered an error. Please try refreshing the page."}),!1,e.jsx(te,{onClick:this.handleReset,children:"Reload Page"})]})]}):this.props.children}}var ft={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var Is=ft.exports,Tt;function Fs(){return Tt||(Tt=1,function(a,r){((n,i)=>{a.exports=i()})(Is,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},c,m=!i.document&&!!i.postMessage,p=i.IS_PAPA_WORKER||!1,N={},C=0,l={};function g(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var d=ne(s);d.chunkSize=parseInt(d.chunkSize),s.step||s.chunk||(d.chunkSize=null),this._handle=new f(d),(this._handle.streamer=this)._config=d}).call(this,t),this.parseChunk=function(s,d){var w=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<w){let M=this._config.newline;M||(y=this._config.quoteChar||'"',M=this._handle.guessLineEndings(s,y)),s=[...s.split(M).slice(w)].join(M)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(y=this._config.beforeFirstChunk(s))!==void 0&&(s=y),this.isFirstChunk=!1,this._halted=!1;var w=this._partialLine+s,y=(this._partialLine="",this._handle.parse(w,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=y.meta.cursor,w=(this._finished||(this._partialLine=w.substring(s-this._baseIndex),this._baseIndex=s),y&&y.data&&(this._rowCount+=y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),p)i.postMessage({results:y,workerId:l.WORKER_ID,finished:w});else if(j(this._config.chunk)&&!d){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!w||!j(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),w||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(s){j(this._config.error)?this._config.error(s):p&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:s,finished:!1})}}function v(t){var s;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),g.call(this,t),this._nextChunk=m?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),m||(s.onload=Q(this._chunkLoaded,this),s.onerror=Q(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!m),this._config.downloadRequestHeaders){var d,w=this._config.downloadRequestHeaders;for(d in w)s.setRequestHeader(d,w[d])}var y;this._config.chunkSize&&(y=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+y));try{s.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}m&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(d){d=s.statusText||d,this._sendError(new Error(d))}}function L(t){(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),g.call(this,t);var s,d,w=typeof FileReader<"u";this.stream=function(y){this._input=y,d=y.slice||y.webkitSlice||y.mozSlice,w?((s=new FileReader).onload=Q(this._chunkLoaded,this),s.onerror=Q(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),y=d.call(y,this._start,M)),s.readAsText(y,this._config.encoding));w||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(s.error)}}function D(t){var s;g.call(this,t=t||{}),this.stream=function(d){return s=d,this._nextChunk()},this._nextChunk=function(){var d,w;if(!this._finished)return d=this._config.chunkSize,s=d?(w=s.substring(0,d),s.substring(d)):(w=s,""),this._finished=!s,this.parseChunk(w)}}function u(t){g.call(this,t=t||{});var s=[],d=!0,w=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):d=!0},this._streamData=Q(function(y){try{s.push(typeof y=="string"?y:y.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(M){this._streamError(M)}},this),this._streamError=Q(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=Q(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=Q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(t){var s,d,w,y,M=Math.pow(2,53),de=-M,ye=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,re=0,E=0,pe=!1,A=!1,P=[],b={data:[],errors:[],meta:{}};function V(U){return t.skipEmptyLines==="greedy"?U.join("").trim()==="":U.length===1&&U[0].length===0}function ae(){if(b&&w&&(je("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),w=!1),t.skipEmptyLines&&(b.data=b.data.filter(function(R){return!V(R)})),xe()){let R=function(oe,me){j(t.transformHeader)&&(oe=t.transformHeader(oe,me)),P.push(oe)};if(b)if(Array.isArray(b.data[0])){for(var U=0;xe()&&U<b.data.length;U++)b.data[U].forEach(R);b.data.splice(0,1)}else b.data.forEach(R)}function q(R,oe){for(var me=t.header?{}:[],B=0;B<R.length;B++){var J=B,z=R[B],z=((ve,I)=>(Z=>(t.dynamicTypingFunction&&t.dynamicTyping[Z]===void 0&&(t.dynamicTyping[Z]=t.dynamicTypingFunction(Z)),(t.dynamicTyping[Z]||t.dynamicTyping)===!0))(ve)?I==="true"||I==="TRUE"||I!=="false"&&I!=="FALSE"&&((Z=>{if(ye.test(Z)&&(Z=parseFloat(Z),de<Z&&Z<M))return 1})(I)?parseFloat(I):ie.test(I)?new Date(I):I===""?null:I):I)(J=t.header?B>=P.length?"__parsed_extra":P[B]:J,z=t.transform?t.transform(z,J):z);J==="__parsed_extra"?(me[J]=me[J]||[],me[J].push(z)):me[J]=z}return t.header&&(B>P.length?je("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+B,E+oe):B<P.length&&je("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+B,E+oe)),me}var le;b&&(t.header||t.dynamicTyping||t.transform)&&(le=1,!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(q),le=b.data.length):b.data=q(b.data,0),t.header&&b.meta&&(b.meta.fields=P),E+=le)}function xe(){return t.header&&P.length===0}function je(U,q,le,R){U={type:U,code:q,message:le},R!==void 0&&(U.row=R),b.errors.push(U)}j(t.step)&&(y=t.step,t.step=function(U){b=U,xe()?ae():(ae(),b.data.length!==0&&(re+=U.data.length,t.preview&&re>t.preview?d.abort():(b.data=b.data[0],y(b,F))))}),this.parse=function(U,q,le){var R=t.quoteChar||'"',R=(t.newline||(t.newline=this.guessLineEndings(U,R)),w=!1,t.delimiter?j(t.delimiter)&&(t.delimiter=t.delimiter(U),b.meta.delimiter=t.delimiter):((R=((oe,me,B,J,z)=>{var ve,I,Z,Ae;z=z||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Pe=0;Pe<z.length;Pe++){for(var Re,$e=z[Pe],be=0,Ne=0,ue=0,_e=(Z=void 0,new H({comments:J,delimiter:$e,newline:me,preview:10}).parse(oe)),Ie=0;Ie<_e.data.length;Ie++)B&&V(_e.data[Ie])?ue++:(Re=_e.data[Ie].length,Ne+=Re,Z===void 0?Z=Re:0<Re&&(be+=Math.abs(Re-Z),Z=Re));0<_e.data.length&&(Ne/=_e.data.length-ue),(I===void 0||be<=I)&&(Ae===void 0||Ae<Ne)&&1.99<Ne&&(I=be,ve=$e,Ae=Ne)}return{successful:!!(t.delimiter=ve),bestDelimiter:ve}})(U,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=R.bestDelimiter:(w=!0,t.delimiter=l.DefaultDelimiter),b.meta.delimiter=t.delimiter),ne(t));return t.preview&&t.header&&R.preview++,s=U,d=new H(R),b=d.parse(s,q,le),ae(),pe?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return pe},this.pause=function(){pe=!0,d.abort(),s=j(t.chunk)?"":s.substring(d.getCharIndex())},this.resume=function(){F.streamer._halted?(pe=!1,F.streamer.parseChunk(s,!0)):setTimeout(F.resume,3)},this.aborted=function(){return A},this.abort=function(){A=!0,d.abort(),b.meta.aborted=!0,j(t.complete)&&t.complete(b),s=""},this.guessLineEndings=function(oe,R){oe=oe.substring(0,1048576);var R=new RegExp(x(R)+"([^]*?)"+x(R),"gm"),le=(oe=oe.replace(R,"")).split("\r"),R=oe.split(`
`),oe=1<R.length&&R[0].length<le[0].length;if(le.length===1||oe)return`
`;for(var me=0,B=0;B<le.length;B++)le[B][0]===`
`&&me++;return me>=le.length/2?`\r
`:"\r"}}function x(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(t){var s=(t=t||{}).delimiter,d=t.newline,w=t.comments,y=t.step,M=t.preview,de=t.fastMode,ye=null,ie=!1,F=t.quoteChar==null?'"':t.quoteChar,re=F;if(t.escapeChar!==void 0&&(re=t.escapeChar),(typeof s!="string"||-1<l.BAD_DELIMITERS.indexOf(s))&&(s=","),w===s)throw new Error("Comment character same as delimiter");w===!0?w="#":(typeof w!="string"||-1<l.BAD_DELIMITERS.indexOf(w))&&(w=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var E=0,pe=!1;this.parse=function(A,P,b){if(typeof A!="string")throw new Error("Input must be a string");var V=A.length,ae=s.length,xe=d.length,je=w.length,U=j(y),q=[],le=[],R=[],oe=E=0;if(!A)return be();if(de||de!==!1&&A.indexOf(F)===-1){for(var me=A.split(d),B=0;B<me.length;B++){if(R=me[B],E+=R.length,B!==me.length-1)E+=d.length;else if(b)return be();if(!w||R.substring(0,je)!==w){if(U){if(q=[],Ae(R.split(s)),Ne(),pe)return be()}else Ae(R.split(s));if(M&&M<=B)return q=q.slice(0,M),be(!0)}}return be()}for(var J=A.indexOf(s,E),z=A.indexOf(d,E),ve=new RegExp(x(re)+x(F),"g"),I=A.indexOf(F,E);;)if(A[E]===F)for(I=E,E++;;){if((I=A.indexOf(F,I+1))===-1)return b||le.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:q.length,index:E}),Re();if(I===V-1)return Re(A.substring(E,I).replace(ve,F));if(F===re&&A[I+1]===re)I++;else if(F===re||I===0||A[I-1]!==re){J!==-1&&J<I+1&&(J=A.indexOf(s,I+1));var Z=Pe((z=z!==-1&&z<I+1?A.indexOf(d,I+1):z)===-1?J:Math.min(J,z));if(A.substr(I+1+Z,ae)===s){R.push(A.substring(E,I).replace(ve,F)),A[E=I+1+Z+ae]!==F&&(I=A.indexOf(F,E)),J=A.indexOf(s,E),z=A.indexOf(d,E);break}if(Z=Pe(z),A.substring(I+1+Z,I+1+Z+xe)===d){if(R.push(A.substring(E,I).replace(ve,F)),$e(I+1+Z+xe),J=A.indexOf(s,E),I=A.indexOf(F,E),U&&(Ne(),pe))return be();if(M&&q.length>=M)return be(!0);break}le.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:q.length,index:E}),I++}}else if(w&&R.length===0&&A.substring(E,E+je)===w){if(z===-1)return be();E=z+xe,z=A.indexOf(d,E),J=A.indexOf(s,E)}else if(J!==-1&&(J<z||z===-1))R.push(A.substring(E,J)),E=J+ae,J=A.indexOf(s,E);else{if(z===-1)break;if(R.push(A.substring(E,z)),$e(z+xe),U&&(Ne(),pe))return be();if(M&&q.length>=M)return be(!0)}return Re();function Ae(ue){q.push(ue),oe=E}function Pe(ue){var _e=0;return _e=ue!==-1&&(ue=A.substring(I+1,ue))&&ue.trim()===""?ue.length:_e}function Re(ue){return b||(ue===void 0&&(ue=A.substring(E)),R.push(ue),E=V,Ae(R),U&&Ne()),be()}function $e(ue){E=ue,Ae(R),R=[],z=A.indexOf(d,E)}function be(ue){if(t.header&&!P&&q.length&&!ie){var _e=q[0],Ie={},He=new Set(_e);let Ve=!1;for(let De=0;De<_e.length;De++){let Oe=_e[De];if(Ie[Oe=j(t.transformHeader)?t.transformHeader(Oe,De):Oe]){let Ue,We=Ie[Oe];for(;Ue=Oe+"_"+We,We++,He.has(Ue););He.add(Ue),_e[De]=Ue,Ie[Oe]++,Ve=!0,(ye=ye===null?{}:ye)[Ue]=Oe}else Ie[Oe]=1,_e[De]=Oe;He.add(Oe)}ie=!0}return{data:q,errors:le,meta:{delimiter:s,linebreak:d,aborted:pe,truncated:!!ue,cursor:oe+(P||0),renamedHeaders:ye}}}function Ne(){y(be()),q=[],le=[]}},this.abort=function(){pe=!0},this.getCharIndex=function(){return E}}function se(t){var s=t.data,d=N[s.workerId],w=!1;if(s.error)d.userError(s.error,s.file);else if(s.results&&s.results.data){var y={abort:function(){w=!0,$(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:K,resume:K};if(j(d.userStep)){for(var M=0;M<s.results.data.length&&(d.userStep({data:s.results.data[M],errors:s.results.errors,meta:s.results.meta},y),!w);M++);delete s.results}else j(d.userChunk)&&(d.userChunk(s.results,y,s.file),delete s.results)}s.finished&&!w&&$(s.workerId,s.results)}function $(t,s){var d=N[t];j(d.userComplete)&&d.userComplete(s),d.terminate(),delete N[t]}function K(){throw new Error("Not implemented.")}function ne(t){if(typeof t!="object"||t===null)return t;var s,d=Array.isArray(t)?[]:{};for(s in t)d[s]=ne(t[s]);return d}function Q(t,s){return function(){t.apply(s,arguments)}}function j(t){return typeof t=="function"}return l.parse=function(t,s){var d=(s=s||{}).dynamicTyping||!1;if(j(d)&&(s.dynamicTypingFunction=d,d={}),s.dynamicTyping=d,s.transform=!!j(s.transform)&&s.transform,!s.worker||!l.WORKERS_SUPPORTED)return d=null,l.NODE_STREAM_INPUT,typeof t=="string"?(t=(w=>w.charCodeAt(0)!==65279?w:w.slice(1))(t),d=new(s.download?v:D)(s)):t.readable===!0&&j(t.read)&&j(t.on)?d=new u(s):(i.File&&t instanceof File||t instanceof Object)&&(d=new L(s)),d.stream(t);(d=(()=>{var w;return!!l.WORKERS_SUPPORTED&&(w=(()=>{var y=i.URL||i.webkitURL||null,M=n.toString();return l.BLOB_URL||(l.BLOB_URL=y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(w=new i.Worker(w)).onmessage=se,w.id=C++,N[w.id]=w)})()).userStep=s.step,d.userChunk=s.chunk,d.userComplete=s.complete,d.userError=s.error,s.step=j(s.step),s.chunk=j(s.chunk),s.complete=j(s.complete),s.error=j(s.error),delete s.worker,d.postMessage({input:t,config:s,workerId:d.id})},l.unparse=function(t,s){var d=!1,w=!0,y=",",M=`\r
`,de='"',ye=de+de,ie=!1,F=null,re=!1,E=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||l.BAD_DELIMITERS.filter(function(P){return s.delimiter.indexOf(P)!==-1}).length||(y=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(d=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(ie=s.skipEmptyLines),typeof s.newline=="string"&&(M=s.newline),typeof s.quoteChar=="string"&&(de=s.quoteChar),typeof s.header=="boolean"&&(w=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");F=s.columns}s.escapeChar!==void 0&&(ye=s.escapeChar+de),s.escapeFormulae instanceof RegExp?re=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(de),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return pe(null,t,ie);if(typeof t[0]=="object")return pe(F||Object.keys(t[0]),t,ie)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||F),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),pe(t.fields||[],t.data||[],ie);throw new Error("Unable to serialize unrecognized input");function pe(P,b,V){var ae="",xe=(typeof P=="string"&&(P=JSON.parse(P)),typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(P)&&0<P.length),je=!Array.isArray(b[0]);if(xe&&w){for(var U=0;U<P.length;U++)0<U&&(ae+=y),ae+=A(P[U],U);0<b.length&&(ae+=M)}for(var q=0;q<b.length;q++){var le=(xe?P:b[q]).length,R=!1,oe=xe?Object.keys(b[q]).length===0:b[q].length===0;if(V&&!xe&&(R=V==="greedy"?b[q].join("").trim()==="":b[q].length===1&&b[q][0].length===0),V==="greedy"&&xe){for(var me=[],B=0;B<le;B++){var J=je?P[B]:B;me.push(b[q][J])}R=me.join("").trim()===""}if(!R){for(var z=0;z<le;z++){0<z&&!oe&&(ae+=y);var ve=xe&&je?P[z]:z;ae+=A(b[q][ve],z)}q<b.length-1&&(!V||0<le&&!oe)&&(ae+=M)}}return ae}function A(P,b){var V,ae;return P==null?"":P.constructor===Date?JSON.stringify(P).slice(1,25):(ae=!1,re&&typeof P=="string"&&re.test(P)&&(P="'"+P,ae=!0),V=P.toString().replace(E,ye),(ae=ae||d===!0||typeof d=="function"&&d(P,b)||Array.isArray(d)&&d[b]||((xe,je)=>{for(var U=0;U<je.length;U++)if(-1<xe.indexOf(je[U]))return!0;return!1})(V,l.BAD_DELIMITERS)||-1<V.indexOf(y)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?de+V+de:V)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!m&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=H,l.ParserHandle=f,l.NetworkStreamer=v,l.FileStreamer=L,l.StringStreamer=D,l.ReadableStreamStreamer=u,i.jQuery&&((c=i.jQuery).fn.parse=function(t){var s=t.config||{},d=[];return this.each(function(M){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var de=0;de<this.files.length;de++)d.push({file:this.files[de],inputElem:this,instanceConfig:c.extend({},s)})}),w(),this;function w(){if(d.length===0)j(t.complete)&&t.complete();else{var M,de,ye,ie,F=d[0];if(j(t.before)){var re=t.before(F.file,F.inputElem);if(typeof re=="object"){if(re.action==="abort")return M="AbortError",de=F.file,ye=F.inputElem,ie=re.reason,void(j(t.error)&&t.error({name:M},de,ye,ie));if(re.action==="skip")return void y();typeof re.config=="object"&&(F.instanceConfig=c.extend(F.instanceConfig,re.config))}else if(re==="skip")return void y()}var E=F.instanceConfig.complete;F.instanceConfig.complete=function(pe){j(E)&&E(pe,F.file,F.inputElem),y()},l.parse(F.file,F.instanceConfig)}}function y(){d.splice(0,1),w()}}),p&&(i.onmessage=function(t){t=t.data,l.WORKER_ID===void 0&&t&&(l.WORKER_ID=t.workerId),typeof t.input=="string"?i.postMessage({workerId:l.WORKER_ID,results:l.parse(t.input,t.config),finished:!0}):(i.File&&t.input instanceof File||t.input instanceof Object)&&(t=l.parse(t.input,t.config))&&i.postMessage({workerId:l.WORKER_ID,results:t,finished:!0})}),(v.prototype=Object.create(g.prototype)).constructor=v,(L.prototype=Object.create(g.prototype)).constructor=L,(D.prototype=Object.create(D.prototype)).constructor=D,(u.prototype=Object.create(g.prototype)).constructor=u,l})}(ft)),ft.exports}var Ls=Fs();const Ms=ns(Ls),ce={debug:(...a)=>{},info:(...a)=>{},warn:(...a)=>{},error:(...a)=>{},group:(a,r)=>{}},qe="https://click.wa.expert/api",Le={fetchRecords:async a=>{try{ce.debug("Fetching records with params:",a);const r=await we.post(`${qe}/data/getAllData`,a);return{data:r.data.data||[],columns:r.data.columns||[],success:!0}}catch(r){throw ce.error("Error fetching records:",r),r}},fetchPaymentRecords:async a=>{try{const r=await we.get(`${qe}/payment-reminders/list?owner_id=${a}`);return{data:r.data.data||r.data||[],success:!0}}catch(r){throw ce.error("Error fetching payment records:",r),r}},fetchRecordById:async(a,r)=>{try{const n=decodeURIComponent(r);return{data:(await we.post(`${qe}/data/getRecordById`,{schemaName:a.schemaName,tableName:a.tableName,id:n})).data,success:!0}}catch(n){return ce.error("Error fetching record by ID:",n),{data:null,success:!1,error:n.message}}},createRecord:async(a,r)=>{try{return{data:(await we.post(`${qe}/data/createRecord`,{schemaName:a.schemaName,tableName:a.tableName,record:r})).data,success:!0}}catch(n){throw ce.error("Error creating record:",n),n}},createPaymentReminder:async a=>{try{return{data:(await we.post(`${qe}/payment-reminders/add`,a,{headers:{"Content-Type":"application/json"}})).data,success:!0}}catch(r){throw ce.error("Error creating payment reminder:",r),r}},updateRecord:async(a,r,n,i)=>{try{return{data:(await we.post(`${qe}/data/updateMultiple`,{schemaName:a.schemaName,tableName:a.tableName,recordId:r,ownerId:n,updates:i},{headers:{"Content-Type":"application/json"}})).data,success:!0}}catch(c){throw ce.error("Error updating record:",c),c}},deleteRecord:async(a,r)=>{try{const n=new URLSearchParams({id:r,schemaName:a.schemaName,tableName:a.tableName});return{data:(await we.get(`${qe}/data/deleteRecord?${n.toString()}`)).data,success:!0}}catch(n){throw ce.error("Error deleting record:",n),n}},fetchDropdownSetup:async(a,r)=>{try{const n=await we.get(`${qe}/reference/setup/check?owner_id=${a}&product_name=${r}`);return n.data.exists&&n.data.setup?{mapping:n.data.setup.mapping||{},columnOrder:n.data.setup.columnOrder||{},exists:!0,success:!0}:{mapping:{},columnOrder:{},exists:!1,success:!0}}catch(n){return ce.error("Error fetching dropdown setup:",n),{mapping:{},columnOrder:{},exists:!1,success:!1}}}},Ps={DEFAULT_PAGE_SIZE:20},Ce={TEXT:"text",NUMBER:"number",EMAIL:"email",PHONE:"tel",URL:"url",DATE:"date",TEXTAREA:"textarea",CHECKBOX:"checkbox",SELECT_STATUS:"select-status",SELECT_PRIORITY:"select-priority"},_t={PENDING:"pending",IN_PROGRESS:"in progress",COMPLETED:"completed"},Ye={LOW:"low",MEDIUM:"medium",HIGH:"high"},Qt={[_t.PENDING]:"bg-yellow-100 text-yellow-700 border-yellow-200",[_t.IN_PROGRESS]:"bg-blue-100 text-blue-700 border-blue-200",[_t.COMPLETED]:"bg-green-100 text-green-700 border-green-200",default:"bg-gray-100 text-gray-700 border-gray-200"},Jt={[Ye.HIGH]:"bg-red-100 text-red-700 border-red-200",[Ye.MEDIUM]:"bg-orange-100 text-orange-700 border-orange-200",[Ye.LOW]:"bg-green-100 text-green-700 border-green-200",default:"bg-gray-100 text-gray-700 border-gray-200"},$s=["invoice","date","due_date","final_due_date","last_overdue_reminder_date","sent_at","created_at","updated_at"],Us=["out_webhooks","emails"],ut={PA_ID:"pa_id",US_ID:"us_id"},zs=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),qs=(a,r)=>{const n=r.toLowerCase();return n.includes("email")?Ce.EMAIL:n.includes("phone")?Ce.PHONE:n.includes("url")||n.includes("link")||n.includes("invoice_url")?Ce.URL:n==="status"?Ce.SELECT_STATUS:n==="priority"?Ce.SELECT_PRIORITY:n.includes("description")||n.includes("notes")||n.includes("comment")?Ce.TEXTAREA:n.includes("date")||n.includes("created")||n.includes("updated")||n==="invoice"?Ce.DATE:typeof a=="number"?Ce.NUMBER:typeof a=="boolean"?Ce.CHECKBOX:a&&a.length>100?Ce.TEXTAREA:Ce.TEXT},St=()=>Date.now().toString(),bt=(a,r)=>r[a==null?void 0:a.toLowerCase()]||r.default,At=(a,r=null)=>a.filter(n=>{if(n.id==="id"||n.id.includes("_comment")||n.id.includes("created_at")||n.id.includes("updated_at"))return!1;if(r){const i=n.id.toLowerCase(),c=n.name.toLowerCase();if(i.includes("balance")||c.includes("balance"))return!1}return!0}),It=(a,r={})=>a.filter(n=>r[n.id]!==0).sort((n,i)=>{const c=r[n.id]||999,m=r[i.id]||999;return c!==m?c-m:n.name.localeCompare(i.name)}),Bs=(a,r=[],n=[])=>Object.fromEntries(Object.entries(a).map(([i,c])=>r.includes(i)?[i,c===""?null:c]:n.includes(i)?c===""?[i,null]:[i,c]:[i,c===""?null:c])),Hs=(a,r=[])=>Object.fromEntries(Object.entries(a).filter(([n,i])=>i!=null&&i!==""?!0:r.includes(n))),Vs=(a,r="normal",n)=>{const[i,c]=o.useState([]),[m,p]=o.useState([]),[N,C]=o.useState([]),[l,g]=o.useState({}),[v,L]=o.useState(!0),D=o.useCallback(async()=>{try{L(!0),ce.debug("Fetching table data",{apiParams:a,type:r});let u;r==="normal"?(u=await Le.fetchRecords(a),g(u.columns)):u=await Le.fetchPaymentRecords(n);let f=u.data||[];if(r==="payment"&&(f=f.filter(x=>x.type==="original"||x.type==="Original")),p(f),c(f),f.length>0){const x=f[0],H=Object.keys(x).map(se=>({id:se,name:zs(se),sortable:!0,visible:!0,type:qs(x[se],se)}));C(H)}else C([])}catch(u){ce.error("Error fetching table data:",u),G.error("Failed to fetch records"),p([]),c([]),C([])}finally{L(!1)}},[a.schemaName,a.tableName,r,n]);return o.useEffect(()=>{D()},[D]),{records:i,setRecords:c,originalRecords:m,columns:N,setColumns:C,metaData:l,loading:v,fetchData:D,refreshData:D}},Ft="https://click.wa.expert/api",Lt={async fetch(a,r){var n;try{const i=`${a}_${r}`,c=await we.post(`${Ft}/data/getRecordById`,{id:i,schemaName:"public",tableName:"column_preferences"});let m=c.data.column_visibility;if(typeof m=="string")try{m=JSON.parse(m)}catch{return null}return{...c.data,column_visibility:m}}catch(i){return((n=i.response)==null?void 0:n.status)===404,null}},async save(a,r,n,i){var m;try{const p=`${a}_${r}`,N=JSON.stringify(n),C=`${Ft}/data/createRecord`,l={schemaName:"public",tableName:"column_preferences",record:{us_id:p,owner_id:a,table_name:r,schema_name:i,column_visibility:N,updated_at:new Date().toISOString()}};return{success:!0,data:(await we.post(C,l)).data}}catch(p){return{success:!1,error:((m=p.response)==null?void 0:m.data)||p.message}}}},Ws=(a,r,n,i)=>{const[c,m]=o.useState(i),[p,N]=o.useState(!1),C=o.useCallback(async()=>{try{const u=await Lt.fetch(a,r);return u&&u.column_visibility?(ce.debug("Loaded column preferences:",u.column_visibility),u.column_visibility):null}catch(u){return ce.error("Error loading column preferences:",u),null}},[a,r]),l=o.useCallback((u,f)=>f?u.map(x=>{const H=f[x.id]!==void 0?f[x.id]:!0;return{...x,visible:H}}):u,[]),g=o.useCallback(async u=>{try{const f={};u.forEach(H=>{f[H.id]=H.visible}),(await Lt.save(a,r,f,n)).success&&(ce.debug("Column preferences saved successfully"),G.success("Column preferences saved"))}catch(f){ce.error("Error saving column preferences:",f),G.error("Failed to save column preferences")}},[a,r,n]),v=o.useCallback(async u=>{const f=c.map(x=>x.id===u?{...x,visible:!x.visible}:x);m(f),await g(f)},[c,g]),L=o.useCallback(async()=>{const u=c.map(f=>({...f,visible:!0}));m(u),await g(u),G.success("Column visibility reset to default")},[c,g]),D=o.useCallback(async()=>{const u=c.map(f=>({...f,visible:!1}));m(u),await g(u),G.success("All columns hidden")},[c,g]);return o.useEffect(()=>{(async()=>{if(!p&&i.length>0){const f=await C(),x=l(i,f);m(x),N(!0)}})()},[i,p,C,l]),o.useEffect(()=>{i.length>0&&!p&&m(i)},[i,p]),{columns:c,setColumns:m,toggleColumnVisibility:v,resetColumnVisibility:L,hideAllColumns:D,visibleColumns:c.filter(u=>u.visible)}},Gs=a=>{const[r,n]=o.useState(""),[i,c]=o.useState([]),[m,p]=o.useState([]),N=o.useMemo(()=>{if(!a.length)return[];let u=[...a];if(r.trim()!==""){const f=r.toLowerCase();u=u.filter(x=>Object.values(x).some(H=>String(H).toLowerCase().includes(f)))}return i.length>0&&(u=u.filter(f=>i.includes(f.status))),m.length>0&&(u=u.filter(f=>m.includes(f.priority))),ce.debug("Filtered records:",{original:a.length,filtered:u.length,searchTerm:r,statusFilter:i,priorityFilter:m}),u},[a,r,i,m]),C=o.useMemo(()=>Array.from(new Set(a.map(u=>u.status))).filter(Boolean),[a]),l=o.useMemo(()=>Array.from(new Set(a.map(u=>u.priority))).filter(Boolean),[a]),g=o.useCallback(u=>{c(f=>f.includes(u)?f.filter(x=>x!==u):[...f,u])},[]),v=o.useCallback(u=>{p(f=>f.includes(u)?f.filter(x=>x!==u):[...f,u])},[]),L=o.useCallback(()=>{n(""),c([]),p([])},[]),D=o.useMemo(()=>r!==""||i.length>0||m.length>0,[r,i,m]);return{searchTerm:r,setSearchTerm:n,statusFilter:i,setStatusFilter:c,priorityFilter:m,setPriorityFilter:p,filteredRecords:N,uniqueStatuses:C,uniquePriorities:l,toggleStatusFilter:g,togglePriorityFilter:v,clearFilters:L,hasActiveFilters:D}},Ks=(a,r=Ps.DEFAULT_PAGE_SIZE)=>{const[n,i]=o.useState(1),[c,m]=o.useState(r),p=a.length,N=Math.ceil(p/c),C=o.useMemo(()=>{const u=n*c,f=u-c;return a.slice(f,u)},[a,n,c]),l=o.useCallback(u=>{const f=Math.max(1,Math.min(u,N));i(f)},[N]),g=o.useCallback(()=>{n<N&&i(u=>u+1)},[n,N]),v=o.useCallback(()=>{n>1&&i(u=>u-1)},[n]),L=o.useCallback(u=>{m(u),i(1)},[]),D=o.useCallback(()=>{i(1),m(r)},[r]);return{currentPage:n,pageSize:c,totalRecords:p,totalPages:N,currentRecords:C,setCurrentPage:l,nextPage:g,previousPage:v,changePageSize:L,resetPagination:D}},Xs=(a,r,n)=>{const[i,c]=o.useState({}),[m,p]=o.useState(!1),[N,C]=o.useState(!1),l=o.useCallback((f={})=>{c(f)},[]),g=o.useCallback((f,x)=>{c(H=>({...H,[f]:x}))},[]),v=o.useCallback(()=>{c({})},[]),L=o.useCallback(async(f={})=>{try{p(!0);const x={...i,...f};ce.debug("Submitting form data:",x);const H=Bs(x,$s,Us),$=Hs(H,["status","type"]);ce.debug("Cleaned record data:",$);let K;return r==="payment"?K=await Le.createPaymentReminder($):K=await Le.createRecord(a,$),G.success("Record created successfully!"),n&&n(K.data),v(),C(!1),K}catch(x){throw ce.error("Error submitting form:",x),x.response?G.error(`Failed to create record: ${x.response.data.error||x.response.data.message||"Unknown error"}`):G.error(`Failed to create record: ${x.message}`),x}finally{p(!1)}},[i,a,r,n,v]),D=o.useCallback((f={})=>{l(f),C(!0)},[l]),u=o.useCallback(()=>{C(!1),v()},[v]);return{formData:i,isSubmitting:m,isOpen:N,initializeForm:l,handleFieldChange:g,resetForm:v,submitForm:L,openForm:D,closeForm:u}},Ys=(a,r)=>{const[n,i]=o.useState({}),[c,m]=o.useState({}),[p,N]=o.useState(!1),[C,l]=o.useState(!0),g=o.useCallback(async()=>{try{l(!0);const u=await Le.fetchDropdownSetup(a,r);u.exists?(i(u.mapping),m(u.columnOrder),N(!0),ce.debug("Dropdown setup loaded:",{mapping:u.mapping,columnOrder:u.columnOrder})):(i({}),m({}),N(!1))}catch(u){ce.error("Error fetching dropdown setup:",u),i({}),m({}),N(!1)}finally{l(!1)}},[a,r]),v=o.useCallback(u=>n[u]||[],[n]),L=o.useCallback(u=>{const f=n[u];return Array.isArray(f)&&f.length>0},[n]),D=o.useCallback(u=>c[u]||999,[c]);return o.useEffect(()=>{a&&r&&g()},[a,r,g]),{dropdownSetup:n,columnOrder:c,setupExists:p,loading:C,fetchSetup:g,getDropdownOptions:v,hasDropdown:L,getColumnOrder:D}},Qs=({tableName:a="jobstatus",onCounterUpdate:r})=>{const[n,i]=o.useState(0),[c,m]=o.useState(""),[p,N]=o.useState(!1),[C,l]=o.useState(!1),[g,v]=o.useState(!1),[L,D]=o.useState(null),u=wt($=>$.user),f=u.owner_id===null?u.id:u.owner_id,x=async()=>{try{v(!0);const $="https://click.wa.expert/api/data/getRecordById",ne={id:`${f}_${a}`,schemaName:"public",tableName:"counter_setup"},{data:Q}=await we.post($,ne);if(Q){const j=parseInt(Q.counter,10)||0;i(j),m(Q.prefix||""),N(Q.is_active||!1),D(Q.id),r&&r({counter:j,prefix:Q.prefix||"",isActive:Q.is_active||!1,recordId:Q.id})}}catch{i(1),m(""),N(!1),D(null),await H()}finally{v(!1)}},H=async()=>{try{const $="https://click.wa.expert/api/data/createRecord",ne={schemaName:"public",tableName:"counter_setup",record:{us_id:`${f}_${a}`,owner_id:f,table_name:a,prefix:"",counter:1,is_active:!1}},{data:Q}=await we.post($,ne);await x()}catch{}},se=async()=>{try{l(!0);const $=parseInt(n,10),K="https://click.wa.expert/api/data/createRecord",ne=`${f}_${a}`,Q={schemaName:"public",tableName:"counter_setup",record:{us_id:ne,owner_id:f,table_name:a,prefix:c,counter:$,is_active:p,updated_at:new Date().toISOString()}};await we.post(K,Q),G.success("Counter settings saved successfully"),r&&r({counter:$,prefix:c,isActive:p,recordId:L||ne}),await x()}catch{G.error("Failed to save counter settings")}finally{l(!1)}};return o.useEffect(()=>{x()},[a]),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(hs,{id:"counter-active",checked:p,onCheckedChange:N}),e.jsx(Be,{htmlFor:"counter-active",className:"text-sm font-medium whitespace-nowrap",children:"Auto Counter"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[120px]",children:[e.jsx(Be,{htmlFor:"prefix",className:"text-sm whitespace-nowrap",children:"Prefix:"}),e.jsx(Fe,{id:"prefix",type:"text",value:c,onChange:$=>m($.target.value),placeholder:"INV",className:"h-9"})]}),p&&e.jsxs("div",{className:"text-sm bg-blue-50 px-2 py-1.5 rounded border border-blue-200 flex w-[10rem] items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Next : "}),e.jsxs("span",{className:"font-mono font-semibold text-blue-700",children:[c,n]})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[e.jsx(te,{onClick:se,disabled:C,size:"sm",variant:"default",children:e.jsx(fs,{className:"h-3.5 w-3.5"})}),e.jsx(te,{onClick:x,disabled:g,variant:"outline",size:"sm",children:e.jsx(Kt,{className:`h-3.5 w-3.5 ${g?"animate-spin":""}`})})]})]})})})},Js=({title:a="All Records",description:r="View and manage all database records",searchTerm:n="",onSearchChange:i,tableName:c,onCounterUpdate:m,urlParams:p={},dropdownSetupExists:N=!1,columnOrderExists:C=!1})=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{className:"w-[95%]",children:[e.jsxs("div",{className:"flex md:flex-row md:items-center justify-between w-full",children:[e.jsx(zt,{className:"text-2xl font-semibold text-slate-700",children:a}),e.jsx("div",{className:"lg:flex-1 lg:max-w-[500px]",children:e.jsx(Qs,{tableName:c,onCounterUpdate:m})})]}),e.jsxs(is,{className:"mt-1",children:[r,p.pa_id&&e.jsx("div",{className:"flex gap-2 mt-1",children:e.jsxs(Se,{variant:"outline",className:"text-xs bg-green-50 border-green-200",children:["PA ID: ",p.pa_id]})}),p.process_name&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs(Se,{variant:"outline",className:"text-xs bg-purple-50 border-purple-200",children:["Process: ",p.process_name]}),e.jsxs(Se,{variant:"outline",className:"text-xs bg-blue-50 border-blue-200",children:[p.process_name,"_balance"]})]}),N&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(Se,{variant:"outline",className:"text-xs",children:"Dropdown Configured"}),C&&e.jsxs(Se,{variant:"outline",className:"text-xs bg-blue-50 border-blue-200",children:[e.jsx(ps,{className:"h-3 w-3 mr-1"}),"Custom Order"]})]})]})]})}),e.jsx("div",{className:"flex flex-col lg:flex-row items-stretch lg:items-end gap-3",children:e.jsxs("div",{className:"relative lg:w-[300px]",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(Fe,{type:"text",placeholder:"Search records...",value:n,onChange:i,className:"pl-9"})]})})]}),Zs=250,er="https://click.wa.expert/api",tr=({value:a,onChange:r,placeholder:n="Enter the ID"})=>{const[i,c]=o.useState(!1),[m,p]=o.useState("jobstatus"),[N,C]=o.useState([]),[l,g]=o.useState(!1),v=o.useRef(!1),L=wt(x=>x.user),D=(L==null?void 0:L.schema_name)||"default_schema";o.useEffect(()=>{if(!a||!a.trim()){C([]),g(!1);return}if(v.current){v.current=!1;return}if(!l)return;const x=new AbortController,H=setTimeout(async()=>{var se;try{const{data:$}=await we.post(`${er}/additional/search`,{schemaName:D,tableName:m,query:a,userId:L.id,userEmail:L.email},{signal:x.signal}),K=($==null?void 0:$.data)||[];C(K),(se=$.data)!=null&&se.table_name&&p($.data.table_name),g(K.length>0)}catch($){$.name!=="CanceledError"&&$.name}},Zs);return()=>{clearTimeout(H),x.abort()}},[a,m,D,l,L.id,L.email]);const u=o.useCallback((x,H)=>{v.current=!0,r(x),p(H),C([]),g(!1)},[r]),f=o.useCallback(x=>{v.current=!1,r(x.target.value),g(!0)},[r]);return e.jsxs("div",{className:"relative w-full",children:[e.jsx(Fe,{type:"text",value:a,onChange:f,className:"bg-gray-50 text-gray-700",placeholder:n,"aria-label":"Search ID",disabled:i,autoComplete:"off"}),l&&N.length>0&&e.jsx("ul",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-48 overflow-y-auto shadow-md",children:N.map((x,H)=>e.jsx("li",{className:"px-3 py-2 cursor-pointer hover:bg-gray-100 text-sm",onClick:()=>u(x.us_id,x.table_name),children:x.us_id},x.us_id||H))})]})},sr=({onRefresh:a,onAddRecord:r,onExportCSV:n,onToggleEdit:i,editEnabled:c=!1,canEdit:m=!0,isLoading:p=!1,splitOptions:N=[],onSplitLoad:C})=>{const[l,g]=et.useState(!1),[v,L]=et.useState(""),[D,u]=et.useState(""),[f,x]=et.useState(!1),H=()=>{g(!0)},se=()=>{g(!1),L(""),u("")},$=async()=>{if(v&&D.trim()&&C){x(!0);try{await C(v,D.trim()),g(!1),L(""),u("")}catch{}finally{x(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(te,{className:"flex items-center gap-2",onClick:r,disabled:p,children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Record"})]}),e.jsxs(te,{className:"flex items-center gap-2",onClick:H,disabled:p,children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Split"})]}),e.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:a,disabled:p,children:[e.jsx(Kt,{className:`h-4 w-4 ${p?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:n,disabled:p,children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]}),m&&e.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:i,disabled:p,children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:c?"Editing":"Edit"}),c&&e.jsx(Se,{className:"ml-1 bg-blue-500",children:"ON"})]})]}),e.jsx(Nt,{open:l,onOpenChange:g,children:e.jsxs(vt,{className:"sm:max-w-md",children:[e.jsx(tt,{children:e.jsx(st,{children:"Add Split Record"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Be,{className:"text-sm font-medium",children:"Parent ID (pa_id):"}),e.jsx(tr,{value:D,onChange:u,placeholder:"Enter parent ID"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Be,{className:"text-sm font-medium",children:"Select Table:"}),e.jsxs(pt,{value:v,onValueChange:L,disabled:f,children:[e.jsx(mt,{className:"w-full",children:e.jsx(xt,{placeholder:"Select a table"})}),e.jsx(gt,{children:N.length>0?N.map((K,ne)=>e.jsx(Ke,{value:K.value||K,children:K.label||K},K.value||ne)):e.jsx(Ke,{value:"no-options",disabled:!0,children:"No options available"})})]})]})]}),e.jsxs(rt,{className:"gap-2 sm:gap-0",children:[e.jsx(te,{variant:"outline",onClick:se,disabled:f,children:"Cancel"}),e.jsx(te,{onClick:$,disabled:!v||!D.trim()||f,children:f?"Loading...":"Load Form"})]})]})})]})},rr=({uniqueStatuses:a=[],uniquePriorities:r=[],statusFilter:n=[],priorityFilter:i=[],onToggleStatus:c,onTogglePriority:m,onClearStatusFilter:p,onClearPriorityFilter:N})=>{const C=n.length+i.length;return e.jsxs(Bt,{children:[e.jsx(Ht,{asChild:!0,children:e.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),C>0&&e.jsx(Se,{className:"ml-1 py-0 px-1.5 h-5 min-w-5 bg-blue-500 text-white rounded-full",children:C})]})}),e.jsxs(Vt,{align:"start",className:"w-56",children:[e.jsxs(Ct,{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Filter by Status"}),n.length>0&&e.jsx(te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:p,children:"Clear"})]}),a.length>0?a.map(l=>e.jsxs(Dt,{checked:n.includes(l),onCheckedChange:()=>c(l),children:[e.jsx(Se,{className:`font-medium mr-2 ${bt(l,Qt)}`,children:l}),e.jsx("span",{children:l})]},l)):e.jsx(jt,{disabled:!0,children:"No statuses available"}),e.jsx(Wt,{}),e.jsxs(Ct,{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Filter by Priority"}),i.length>0&&e.jsx(te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:N,children:"Clear"})]}),r.length>0?r.map(l=>e.jsxs(Dt,{checked:i.includes(l),onCheckedChange:()=>m(l),children:[e.jsx(Se,{className:`font-medium mr-2 ${bt(l,Jt)}`,children:l}),e.jsx("span",{children:l})]},l)):e.jsx(jt,{disabled:!0,children:"No priorities available"})]})]})},ar=({columns:a=[],onToggleColumn:r,onResetVisibility:n,onHideAll:i})=>e.jsxs(Bt,{children:[e.jsx(Ht,{asChild:!0,children:e.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Columns"})]})}),e.jsxs(Vt,{align:"start",className:"w-56",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[e.jsx(Ct,{className:"p-0",children:"Toggle Columns"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:c=>{c.stopPropagation(),i()},children:"Hide All"}),e.jsx(te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:c=>{c.stopPropagation(),n()},children:"Reset"})]})]}),e.jsx(Wt,{}),a.map(c=>e.jsx(jt,{onSelect:m=>{m.preventDefault(),r(c.id)},children:e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx(Xt,{checked:c.visible,onCheckedChange:()=>r(c.id)}),e.jsx("span",{className:"flex-1",children:c.name}),!c.visible&&e.jsx(Se,{variant:"secondary",className:"text-xs",children:"Hidden"})]})},c.id))]})]}),nr=({records:a=[],columns:r=[],loading:n=!1,editEnabled:i=!1,canDelete:c=!1,onSort:m,onDeleteRecord:p,onEditRecord:N,onSaveRecord:C,sortColumn:l=null,sortDirection:g="asc",emptyMessage:v="No records found",onClearFilters:L})=>{const[D,u]=o.useState(null),[f,x]=o.useState({}),H=o.useCallback(j=>{i&&(u(j.id),x(j),N&&N(j))},[i,N]),se=o.useCallback(()=>{C&&C(D,f),u(null),x({})},[D,f,C]),$=o.useCallback(()=>{u(null),x({})},[]),K=o.useCallback((j,t)=>{x(s=>({...s,[j]:t}))},[]),ne=(j,t)=>{const s=j[t.id];return D===j.id&&t.id!=="id"&&i?e.jsx(Fe,{type:"text",value:f[t.id]||"",onChange:d=>K(t.id,d.target.value),className:"border rounded px-2 py-1 w-full",onClick:d=>d.stopPropagation()}):t.id==="status"?e.jsx(Se,{className:`font-medium ${bt(s,Qt)}`,children:s}):t.id==="priority"?e.jsx(Se,{className:`font-medium ${bt(s,Jt)}`,children:s}):t.id==="task_file"&&s?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:s})]}):e.jsx("span",{children:s||"â€”"})},Q=r.filter(j=>j.visible);return e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(bs,{children:[e.jsx(ws,{children:e.jsxs(ct,{className:"bg-slate-50",children:[c&&e.jsx(Ot,{className:"w-[60px] text-center",children:"Delete"}),Q.map(j=>e.jsx(Ot,{className:`${j.sortable?"cursor-pointer hover:bg-slate-100":""}`,onClick:()=>j.sortable&&m&&m(j.id),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:j.name}),l===j.id&&e.jsx(os,{className:`h-4 w-4 transition-transform ${g==="desc"?"rotate-180":""}`})]})},j.id))]})}),e.jsx(ys,{children:n?e.jsx(ct,{children:e.jsx(dt,{colSpan:Q.length+(c?1:0),className:"h-24 text-center",children:"Loading records..."})}):a.length===0?e.jsx(ct,{children:e.jsxs(dt,{colSpan:Q.length+(c?1:0),className:"h-24 text-center",children:[v,L&&e.jsx(te,{variant:"link",onClick:L,className:"ml-2",children:"Clear filters?"})]})}):a.map((j,t)=>e.jsxs(ct,{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>H(j),children:[c&&e.jsx(dt,{className:"w-[60px] text-center",children:e.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:s=>{s.stopPropagation(),p&&p(j)},children:e.jsx(Yt,{className:"h-4 w-4"})})}),Q.map(s=>e.jsx(dt,{children:ne(j,s)},s.id))]},j.id||t))})]})}),D&&i&&e.jsxs("div",{className:"flex gap-2 p-3 bg-slate-50 border-t",children:[e.jsx(te,{size:"sm",onClick:se,children:"Save Changes"}),e.jsx(te,{size:"sm",variant:"ghost",onClick:$,children:"Cancel"})]})]})},Mt=({column:a,value:r,onChange:n,dropdownOptions:i=[],isAutoFilled:c=!1,disabled:m=!1})=>{const{id:p,type:N,name:C}=a;if(c)return e.jsx(Fe,{id:p,type:"text",value:r||"",disabled:!0,className:"bg-gray-50 cursor-not-allowed text-gray-600",placeholder:`Auto-filled ${C.toLowerCase()}`});if(i.length>0)return e.jsxs(pt,{value:r||"",onValueChange:l=>n(p,l),disabled:m,children:[e.jsx(mt,{children:e.jsx(xt,{placeholder:`Select ${C.toLowerCase()}`})}),e.jsx(gt,{children:i.map((l,g)=>e.jsx(Ke,{value:l,children:l},g))})]});switch(N){case Ce.TEXTAREA:return e.jsx(_s,{id:p,value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,rows:3,disabled:m});case Ce.SELECT_PRIORITY:return e.jsxs(pt,{value:r||"",onValueChange:l=>n(p,l),disabled:m,children:[e.jsx(mt,{children:e.jsx(xt,{placeholder:"Select priority"})}),e.jsxs(gt,{children:[e.jsx(Ke,{value:Ye.LOW,children:"Low"}),e.jsx(Ke,{value:Ye.MEDIUM,children:"Medium"}),e.jsx(Ke,{value:Ye.HIGH,children:"High"})]})]});case Ce.NUMBER:return e.jsx(Fe,{id:p,type:"number",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.EMAIL:return e.jsx(Fe,{id:p,type:"email",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.PHONE:return e.jsx(Fe,{id:p,type:"tel",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.DATE:return e.jsx(Fe,{id:p,type:"date",value:r||"",onChange:l=>n(p,l.target.value),disabled:m});case Ce.URL:return e.jsx(Fe,{id:p,type:"url",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.CHECKBOX:return e.jsx(Xt,{id:p,checked:r||!1,onCheckedChange:l=>n(p,l),disabled:m});default:return e.jsx(Fe,{id:p,type:"text",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m})}},Pt=({isOpen:a,onClose:r,onSubmit:n,formData:i,onFieldChange:c,columns:m,metaData:p=[],dropdownSetup:N={},columnOrder:C={},processName:l=null,isSubmitting:g=!1,counterConfig:v,setCounterConfig:L,mode:D="create",itsSplit:u})=>{const f=wt(h=>h.user),x=(f==null?void 0:f.owner_id)??(f==null?void 0:f.id),[H,se]=Gt(),[$,K]=o.useState(!1),[ne,Q]=o.useState(""),[j,t]=o.useState({}),[s,d]=o.useState([]),[w,y]=o.useState([]),[M,de]=o.useState({}),[ye,ie]=o.useState({}),[F,re]=o.useState(null),[E,pe]=o.useState(null),[A,P]=o.useState(!1),[b,V]=o.useState(!1),[ae,xe]=o.useState(!1),[je,U]=o.useState([]),[q,le]=o.useState([]);o.useEffect(()=>{oe()},[]);const R=f.schema_name,oe=async()=>{const h=`https://click.wa.expert/api/data/getAllTables?schemaName=${R}`,{data:O}=await we.get(h);le(O.data)};o.useEffect(()=>{a&&D==="create"&&m.length>0&&m.some(O=>O.id==="status"||O.id.toLowerCase()==="status")&&je.length>0&&(!i.status||i.status==="")&&c("status",je[0])},[a,D,m,je,i.status]);const me=o.useMemo(()=>{const h=At(m,l);return It(h,C)},[m,l,C]),B=h=>{const O=p.find(k=>k.column_name===h);return(O==null?void 0:O.is_nullable)==="NO"},J=h=>h===ut.PA_ID,z=h=>{const O=N[h];return Array.isArray(O)?O:[]},ve=h=>l&&(h.id.toLowerCase().includes("quantity")||h.name.toLowerCase().includes("quantity")),I=()=>{const h=window.location.pathname.split("/");return h[h.length-2]},Z=(h,O)=>{const k={};return Object.entries(h).forEach(([W,he])=>{if(he===""||he===null||he===void 0)return;const Te=O.find(X=>X.column_name===W);if(Te){const X=Te.data_type.toLowerCase();if(X.includes("int")||X.includes("serial")){const ge=parseInt(he,10);isNaN(ge)||(k[W]=ge)}else if(X.includes("numeric")||X.includes("decimal")||X.includes("float")||X.includes("double")){const ge=parseFloat(he);isNaN(ge)||(k[W]=ge)}else X.includes("bool")?k[W]=he===!0||he==="true"||he==="1":(X.includes("date")||X.includes("time"),k[W]=he)}else k[W]=he}),k},Ae=async h=>{try{const O={schemaName:f.schema_name,tableName:h,userId:f.id,userEmail:f.email},k=await we.post("https://click.wa.expert/api/data/getAllData",O),W=k.data.data||[],he=k.data.columns||[];let Te=[];if(W.length>0){const ot=W[0];Te=Object.keys(ot).map(ze=>({id:ze,name:Pe(ze),accessor:ze,sortable:!0,visible:!0,type:Re(ot[ze],ze)}))}const X=`https://click.wa.expert/api/reference/setup/check?owner_id=${x}&product_name=${h}`,ge=await we.get(X);let Ee={},lt={},Qe=[];return ge.data.exists&&ge.data.setup&&(Ee=ge.data.setup.mapping||{},lt=ge.data.setup.columnOrder||{},Qe=ge.data.setup.process_steps||[],U(Qe)),{columns:Te,metaData:he,dropdownSetup:Ee,columnOrder:lt,processName:null,processSteps:Qe}}catch(O){throw O}},Pe=h=>h.split("_").map(O=>O.charAt(0).toUpperCase()+O.slice(1)).join(" "),Re=(h,O)=>{const k=O.toLowerCase();return k.includes("email")?"email":k.includes("phone")?"tel":k.includes("url")||k.includes("link")?"url":k==="status"?"select-status":k==="priority"?"select-priority":k.includes("description")||k.includes("notes")||k.includes("comment")?"textarea":k.includes("date")||k.includes("created")||k.includes("updated")?"date":typeof h=="number"?"number":typeof h=="boolean"?"checkbox":h&&h.length>100?"textarea":"text"},$e=async h=>{try{const O=I();let k=Z(h,p);const W={process_name:H.get("process_name"),pa_id:H.get("pa_id"),status:H.get("status")};if(W.process_name){const X=`${W.process_name}_balance`,ge=m.find(Ee=>Ee.id.toLowerCase().includes("quantity"));if(ge){const Ee=k[ge.id];Ee&&(k[X]=Ee)}}(W.status&&W.pa_id||W.process_name&&W.pa_id)&&(k.us_id=`${W.pa_id} -S- ${k.us_id}`);const he={schemaName:f.schema_name,tableName:O};return await Le.createRecord(he,k)}catch(O){throw O}},be=async(h,O)=>{try{const k=Z(h,w);E&&k.us_id&&(k.us_id=`${E} -S- ${k.us_id}`);const W={schemaName:f.schema_name,tableName:O};return await Le.createRecord(W,k)}catch(k){throw k}},Ne=async()=>{await n()},ue=async()=>{var h,O,k,W,he,Te;xe(!0);try{const X=await $e(i);let ge=null;if((O=(h=X==null?void 0:X.data)==null?void 0:h.data)!=null&&O.us_id)ge=X.data.data.us_id;else if(i.us_id)ge=i.us_id;else if((W=(k=X==null?void 0:X.data)==null?void 0:k.data)!=null&&W.us_id&&X.data.data.us_id.includes(" -S- ")){const Ee=X.data.data.us_id.split(" -S- ");ge=Ee[Ee.length-1]}if(v.isActive&&v.recordId)try{await Le.updateRecord({schemaName:"public",tableName:"counter_setup"},v.recordId,x,{counter:v.counter+1}),L(Ee=>({...Ee,counter:Ee.counter+1}))}catch{G.warning("Record created but counter increment failed")}ge?(pe(ge),G.success("Record created successfully"),K(!0)):G.error("Could not get us_id from created record")}catch(X){G.error("Failed to create record: "+(((Te=(he=X.response)==null?void 0:he.data)==null?void 0:Te.details)||X.message))}finally{xe(!1)}},_e=async()=>{if(ne){P(!0);try{const h=await Ae(ne);d(h.columns||[]),y(h.metaData||[]),de(h.dropdownSetup||{}),ie(h.columnOrder||{}),re(h.processName||null);const O={[ut.PA_ID]:E,us_id:St()};h.columns.some(W=>W.id==="status"||W.id.toLowerCase()==="status")&&h.processSteps&&h.processSteps.length>0&&(O.status=h.processSteps[0]),h.columns.forEach(W=>{O[W.id]||(O[W.id]="")}),t(O),K(!1)}catch{G.error("Failed to load table structure. Please try again.")}finally{P(!1)}}},Ie=(h,O)=>{t(k=>({...k,[h]:O}))},He=async()=>{V(!0);try{await be(j,ne)&&(G.success("Detail record created successfully"),De(),window.location.reload())}catch{G.error("Failed to create detail record. Please try again.")}finally{V(!1)}},Ve=async()=>{V(!0);try{await be(j,ne)&&(G.success("Detail record created successfully"),t({}),d([]),y([]),de({}),ie({}),re(null),Q(""),K(!0))}catch{G.error("Failed to create detail record. Please try again.")}finally{V(!1)}},De=()=>{K(!1),Q(""),t({}),d([]),y([]),de({}),ie({}),re(null),pe(null),U([]),r()},Oe=()=>e.jsxs(e.Fragment,{children:[e.jsxs(tt,{children:[e.jsx(st,{children:"Select Table for Details"}),e.jsxs(ht,{children:["Choose a table to add detail records linked to the parent record (pa_id: ",E,")"]})]}),e.jsxs("div",{className:"py-6",children:[e.jsx(Be,{htmlFor:"table-select",className:"text-sm font-medium mb-2 block",children:"Select Table"}),e.jsxs(pt,{value:ne,onValueChange:Q,children:[e.jsx(mt,{id:"table-select",className:"w-full",children:e.jsx(xt,{placeholder:"Choose a table..."})}),e.jsx(gt,{children:q.map(h=>e.jsx(Ke,{value:h.title,children:h.title.charAt(0).toUpperCase()+h.title.slice(1)},h.title))})]})]}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[e.jsx(te,{variant:"outline",onClick:De,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(te,{onClick:_e,disabled:!ne||A,className:"w-full sm:w-auto",children:A?"Loading...":"Load Form"})]})]}),Ue=()=>e.jsxs(e.Fragment,{children:[e.jsxs(tt,{children:[e.jsx(st,{children:D==="create"?"Add New Record":"Edit Record"}),e.jsxs(ht,{children:[D==="create"?"Fill in the details to create a new record in the database.":"Update the record details.",l&&e.jsxs("span",{className:"block mt-1 text-blue-600",children:["Note: The ",l,"_balance field will be automatically set to match the quantity value."]})]})]}),e.jsx("div",{className:"space-y-6 py-4",children:me.map(h=>{const O=C[h.id],k=J(h.id),W=B(h.id),he=ve(h);return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs(Be,{htmlFor:h.id,className:"font-medium text-sm sm:w-48 sm:text-right sm:flex-shrink-0 flex items-center gap-1 justify-start sm:justify-end",children:[O&&e.jsx(Se,{variant:"secondary",className:"text-xs h-4 px-1 mr-1",children:O}),e.jsx("span",{className:"flex-1 sm:flex-initial",children:h.name}),W&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 text-red-100",children:"*"}),k&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 bg-green-500 ml-1",children:"auto"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Mt,{column:h,value:i[h.id],onChange:c,dropdownOptions:z(h.id),isAutoFilled:k,disabled:g||ae}),k&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.id===ut.PA_ID?"Automatically filled from URL parameter":"Automatically generated unique identifier"}),he&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["This value will be used to set ",l,"_balance"]})]})]},h.id)})}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[e.jsx(te,{variant:"outline",onClick:De,disabled:g||ae,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(te,{onClick:Ne,disabled:g||ae,className:"w-full sm:w-auto",children:g?D==="create"?"Creating...":"Updating...":D==="create"?"Create Record":"Update Record"}),!u&&e.jsx(te,{onClick:ue,disabled:g||ae,variant:"secondary",className:"w-full sm:w-auto",children:ae?"Creating...":"Create & Add Details"})]})]}),We=o.useMemo(()=>{const h=At(s,F);return It(h,ye)},[s,F,ye]),yt=()=>e.jsxs(e.Fragment,{children:[e.jsxs(tt,{children:[e.jsxs(st,{children:["Add Details - ",ne.charAt(0).toUpperCase()+ne.slice(1)]}),e.jsxs(ht,{children:["Adding detail record linked to parent (pa_id: ",E,")"]})]}),e.jsx("div",{className:"space-y-6 py-4",children:We.map(h=>{var Te;const O=ye[h.id],k=h.id===ut.PA_ID,W=((Te=w.find(X=>X.column_name===h.id))==null?void 0:Te.is_nullable)==="NO",he=Array.isArray(M[h.id])?M[h.id]:[];return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs(Be,{htmlFor:h.id,className:"font-medium text-sm sm:w-48 sm:text-right sm:flex-shrink-0 flex items-center gap-1 justify-start sm:justify-end",children:[O&&e.jsx(Se,{variant:"secondary",className:"text-xs h-4 px-1 mr-1",children:O}),e.jsx("span",{className:"flex-1 sm:flex-initial",children:h.name}),W&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 text-red-100",children:"*"}),k&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 bg-green-500 ml-1",children:"auto"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Mt,{column:h,value:j[h.id],onChange:Ie,dropdownOptions:he,isAutoFilled:k,disabled:b}),k&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Automatically filled from parent record: ",E]})]})]},h.id)})}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[e.jsx(te,{variant:"outline",onClick:De,disabled:b,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(te,{onClick:He,disabled:b,className:"w-full sm:w-auto",children:b?"Creating...":"Create Record"}),e.jsx(te,{onClick:Ve,disabled:b,variant:"secondary",className:"w-full sm:w-auto",children:b?"Creating...":"Create & Add More Details"})]})]});return e.jsx(Nt,{open:a,onOpenChange:r,children:e.jsx(vt,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",onInteractOutside:h=>h.preventDefault(),children:$?Oe():s.length>0?yt():Ue()})})},ir=({isOpen:a,onClose:r,onConfirm:n,record:i,confirmInput:c,onConfirmInputChange:m,isDeleting:p=!1})=>{const N=c.trim()===(i==null?void 0:i.us_id);return e.jsx(Nt,{open:a,onOpenChange:r,children:e.jsxs(vt,{className:"max-w-md",children:[e.jsxs(tt,{children:[e.jsxs(st,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-red-500"}),"Confirm Deletion"]}),e.jsxs(ht,{children:["This action cannot be undone. Please type the ",e.jsx("strong",{children:"us_id"})," to confirm deletion."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[i&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[e.jsx("p",{className:"text-sm font-medium",children:"Record to delete:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",i.id]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["US_ID: ",e.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:i.us_id})]})]}),e.jsxs("div",{children:[e.jsx(Be,{htmlFor:"confirm-us-id",className:"text-sm font-medium",children:"Enter us_id to confirm:"}),e.jsx(Fe,{id:"confirm-us-id",type:"text",placeholder:"Type us_id here",value:c,onChange:C=>m(C.target.value),className:"mt-1",autoFocus:!0,disabled:p})]})]}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(te,{variant:"outline",onClick:r,disabled:p,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(te,{variant:"destructive",onClick:n,disabled:p||!N,className:"w-full sm:w-auto",children:p?"Deleting...":"Delete Record"})]})]})})};function lr({className:a,...r}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:it("mx-auto flex w-full justify-center",a),...r})}function or({className:a,...r}){return e.jsx("ul",{"data-slot":"pagination-content",className:it("flex flex-row items-center gap-1",a),...r})}function Ge({...a}){return e.jsx("li",{"data-slot":"pagination-item",...a})}function at({className:a,isActive:r,size:n="icon",...i}){return e.jsx("a",{"aria-current":r?"page":void 0,"data-slot":"pagination-link","data-active":r,className:it(cs({variant:r?"outline":"ghost",size:n}),a),...i})}function cr({className:a,...r}){return e.jsxs(at,{"aria-label":"Go to previous page",size:"default",className:it("gap-1 px-2.5 sm:pl-2.5",a),...r,children:[e.jsx(Cs,{}),e.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function dr({className:a,...r}){return e.jsxs(at,{"aria-label":"Go to next page",size:"default",className:it("gap-1 px-2.5 sm:pr-2.5",a),...r,children:[e.jsx("span",{className:"hidden sm:block",children:"Next"}),e.jsx(ds,{})]})}function ur(a=640){const[r,n]=o.useState(typeof window<"u"?window.innerWidth<a:!1);return o.useEffect(()=>{function i(){n(window.innerWidth<a)}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[a]),r}function hr({currentPage:a,setCurrentPage:r,totalPages:n,records:i=[],pageSize:c=10,totalRecords:m=0}){const N=ur(640)?3:7,C=o.useMemo(()=>{if(n<=N)return[...Array(n)].map((D,u)=>u+1);const l=Math.floor(N/2);let g=Math.max(1,a-l),v=Math.min(n,a+l);a<=l?(g=1,v=N):a+l>=n&&(g=n-N+1,v=n);const L=[];for(let D=g;D<=v;D++)L.push(D);return L},[n,a,N]);return e.jsxs("div",{className:"flex items-center justify-between mt-4 w-full px-4",children:[e.jsxs("div",{className:"hidden sm:block text-sm text-slate-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:Math.min(i.length,c)})," of"," ",e.jsx("span",{className:"font-medium",children:m})," records"]}),e.jsx("div",{className:"flex-1 flex justify-center sm:justify-end",children:e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto sm:overflow-visible py-1",children:e.jsx(lr,{children:e.jsxs(or,{children:[e.jsx(Ge,{children:e.jsx(cr,{href:"#",onClick:l=>{l.preventDefault(),a>1&&r(a-1)},className:a<=1?"pointer-events-none opacity-50":""})}),C[0]>1&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{children:e.jsx(at,{href:"#",onClick:l=>{l.preventDefault(),r(1)},isActive:a===1,children:"1"})}),e.jsx(Ge,{children:e.jsx("span",{className:"inline-flex items-center px-2",children:"â€¦"})})]}),C.map(l=>e.jsx(Ge,{children:e.jsx(at,{href:"#",onClick:g=>{g.preventDefault(),r(l)},isActive:a===l,children:l})},l)),C[C.length-1]<n&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{children:e.jsx("span",{className:"inline-flex items-center px-2",children:"â€¦"})}),e.jsx(Ge,{children:e.jsx(at,{href:"#",onClick:l=>{l.preventDefault(),r(n)},isActive:a===n,children:n})})]}),e.jsx(Ge,{children:e.jsx(dr,{href:"#",onClick:l=>{l.preventDefault(),a<n&&r(a+1)},className:a>=n?"pointer-events-none opacity-50":""})})]})})})})]})}const fr=({type:a="normal"})=>{const[r,n]=Gt(),i=wt(S=>S.user),c=o.useMemo(()=>({pa_id:r.get("pa_id"),us_id:r.get("us_id"),show:r.get("show"),status:r.get("status"),process_name:r.get("process_name")}),[r]),[m,p]=o.useState([]);o.useEffect(()=>{C()},[]);const N=i.schema_name,C=async()=>{const S=`https://click.wa.expert/api/data/getAllTables?schemaName=${N}`,{data:T}=await we.get(S),fe=T.data.map(Y=>Y.title);p(fe)},{tableName1:l}=us(),g=o.useMemo(()=>({schemaName:i.schema_name,tableName:l,userId:i.id,userEmail:i.email}),[i.schema_name,l,i.id,i.email]),v=(i==null?void 0:i.owner_id)??(i==null?void 0:i.id),[L,D]=o.useState(!1),[u,f]=o.useState(null),[x,H]=o.useState("asc"),[se,$]=o.useState({counter:0,prefix:"",isActive:!1,recordId:null}),[K,ne]=o.useState([]),[Q,j]=o.useState(!1),[t,s]=o.useState(null),[d,w]=o.useState(""),[y,M]=o.useState(!1),[de,ye]=o.useState(!1),[ie,F]=o.useState({tableName:"",paId:"",columns:[],metaData:[],dropdownSetup:{},columnOrder:{},formData:{},processSteps:[]}),{setRecords:re,originalRecords:E,columns:pe,metaData:A,loading:P,refreshData:b}=Vs(g,a,v),{columns:V,setColumns:ae,toggleColumnVisibility:xe,resetColumnVisibility:je,hideAllColumns:U,visibleColumns:q}=Ws(v,g.tableName,g.schemaName,pe),{searchTerm:le,setSearchTerm:R,statusFilter:oe,priorityFilter:me,filteredRecords:B,uniqueStatuses:J,uniquePriorities:z,toggleStatusFilter:ve,togglePriorityFilter:I,clearFilters:Z,hasActiveFilters:Ae}=Gs(E),{currentPage:Pe,totalPages:Re,currentRecords:$e,setCurrentPage:be,resetPagination:Ne}=Ks(B),{formData:ue,isSubmitting:_e,isOpen:Ie,handleFieldChange:He,submitForm:Ve,openForm:De,closeForm:Oe}=Xs(g,a,b),{dropdownSetup:Ue,columnOrder:We,setupExists:yt}=Ys(v,g.tableName);o.useEffect(()=>{const S=async()=>{try{const T=`https://click.wa.expert/api/reference/setup/check?owner_id=${v}&product_name=${g.tableName}`,{data:_}=await we.get(T);_.exists&&_.setup&&_.setup.process_steps?ne(_.setup.process_steps):ne([])}catch{ne([])}};v&&g.tableName&&S()},[v,g.tableName]);const h=async S=>{try{const T={schemaName:i.schema_name,tableName:S,userId:i.id,userEmail:i.email},_=await we.post("https://click.wa.expert/api/data/getAllData",T),fe=_.data.data||[],Y=_.data.columns||[];let ee=[];if(fe.length>0){const kt=fe[0];ee=Object.keys(kt).map(Ze=>({id:Ze,name:O(Ze),accessor:Ze,sortable:!0,visible:!0,type:k(kt[Ze],Ze)}))}const Xe=`https://click.wa.expert/api/reference/setup/check?owner_id=${v}&product_name=${S}`,ke=await we.get(Xe);let Me={},Je={},Et=[];return ke.data.exists&&ke.data.setup&&(Me=ke.data.setup.mapping||{},Je=ke.data.setup.columnOrder||{},Et=ke.data.setup.process_steps||[]),{columns:ee,metaData:Y,dropdownSetup:Me,columnOrder:Je,processName:null,processSteps:Et}}catch(T){throw T}},O=S=>S.split("_").map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),k=(S,T)=>{const _=T.toLowerCase();return _.includes("email")?"email":_.includes("phone")?"tel":_.includes("url")||_.includes("link")?"url":_==="status"?"select-status":_==="priority"?"select-priority":_.includes("description")||_.includes("notes")||_.includes("comment")?"textarea":_.includes("date")||_.includes("created")||_.includes("updated")?"date":typeof S=="number"?"number":typeof S=="boolean"?"checkbox":S&&S.length>100?"textarea":"text"},W=async(S,T)=>{try{const _=await h(S),fe={pa_id:T,us_id:St()};_.columns.some(ee=>ee.id==="status"||ee.id.toLowerCase()==="status")&&_.processSteps&&_.processSteps.length>0&&(fe.status=_.processSteps[0]),_.columns.forEach(ee=>{fe[ee.id]||(fe[ee.id]="")}),F({tableName:S,paId:T,columns:_.columns,metaData:_.metaData,dropdownSetup:_.dropdownSetup,columnOrder:_.columnOrder,formData:fe,processSteps:_.processSteps||[]}),ye(!0),G.success("Form loaded successfully")}catch(_){throw G.error("Failed to load form"),_}},he=(S,T)=>{F(_=>({..._,formData:{..._.formData,[S]:T}}))},Te=async()=>{var S,T;try{const _={};Object.entries(ie.formData).forEach(([Y,ee])=>{if(ee!==""&&ee!==null&&ee!==void 0){const Xe=ie.metaData.find(ke=>ke.column_name===Y);if(Xe){const ke=Xe.data_type.toLowerCase();if(ke.includes("int")||ke.includes("serial")){const Me=parseInt(ee,10);isNaN(Me)||(_[Y]=Me)}else if(ke.includes("numeric")||ke.includes("decimal")||ke.includes("float")){const Me=parseFloat(ee);isNaN(Me)||(_[Y]=Me)}else ke.includes("bool")?_[Y]=ee===!0||ee==="true"||ee==="1":_[Y]=ee}else _[Y]=ee}}),_.us_id&&_.pa_id&&(_.us_id=`${_.pa_id} -S- ${_.us_id}`);const fe={schemaName:i.schema_name,tableName:ie.tableName};await Le.createRecord(fe,_),G.success("Split record created successfully"),ye(!1),F({tableName:"",paId:"",columns:[],metaData:[],dropdownSetup:{},columnOrder:{},formData:{},processSteps:[]}),b()}catch(_){throw G.error("Failed to create split record: "+(((T=(S=_.response)==null?void 0:S.data)==null?void 0:T.details)||_.message)),_}},X=()=>{ye(!1),F({tableName:"",paId:"",columns:[],metaData:[],dropdownSetup:{},columnOrder:{},formData:{},processSteps:[]})};o.useEffect(()=>{pe.length>0&&V.length===0&&ae(pe)},[pe]),o.useEffect(()=>{const S=r.get("search");S&&R(decodeURIComponent(S))},[r,R]),o.useEffect(()=>{c.show==="true"&&V.length>0&&ze()},[c.show,V]);const ge=o.useCallback(S=>{$(S)},[]),Ee=o.useCallback(()=>{b(),Z(),Ne(),G.success("Data refreshed")},[b,Z,Ne]),lt=o.useCallback(S=>{R(S.target.value),Ne()},[R,Ne]),Qe=o.useCallback(S=>{u===S?H(_=>_==="asc"?"desc":"asc"):(f(S),H("asc"));const T=[...B].sort((_,fe)=>{const Y=_[S]||"",ee=fe[S]||"";return typeof Y=="string"&&typeof ee=="string"?x==="asc"?Y.localeCompare(ee):ee.localeCompare(Y):x==="asc"?Y-ee:ee-Y});re(T)},[u,x,B,re]),ot=o.useCallback(()=>{if(!B.length){G.error("No records to export");return}try{const S=B.map(ke=>{const Me={};return q.forEach(Je=>{Me[Je.name]=ke[Je.id]}),Me}),T=Ms.unparse(S,{quotes:!0,quoteChar:'"',delimiter:",",header:!0}),_=new Blob([T],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(_),Y=document.createElement("a"),ee=new Date().toISOString().slice(0,10),Xe=`${g.tableName}_export_${ee}.csv`;Y.setAttribute("href",fe),Y.setAttribute("download",Xe),Y.style.display="none",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(fe),G.success(`Exported ${S.length} records to CSV`)}catch(S){ce.error("Error exporting CSV:",S),G.error("Failed to export CSV")}},[B,q,g.tableName]),ze=o.useCallback(async()=>{const S={};if(V.forEach(T=>{c[T.id]?S[T.id]=c[T.id]:T.id==="us_id"?S[T.id]=se.isActive?`${se.prefix}${se.counter}`:St():T.id==="status"&&K.length>0?S[T.id]=K[0]:S[T.id]=""}),De(S),c.show==="true"){const T=new URLSearchParams(r);T.delete("show"),n(T,{replace:!0})}},[V,c,se,De,r,n,K]),Zt=o.useCallback(async()=>{try{let S={};if(c.process_name){const T=`${c.process_name}_balance`,_=V.find(fe=>fe.id.toLowerCase().includes("quantity"));if(_){const fe=ue[_.id];fe&&(S[T]=fe)}}if((c.status&&c.pa_id||c.process_name&&c.pa_id)&&(S.us_id=`${c.pa_id} -S- ${ue.us_id}`),await Ve(S),se.isActive&&se.recordId)try{await Le.updateRecord({schemaName:"public",tableName:"counter_setup"},se.recordId,v,{counter:se.counter+1}),$(T=>({...T,counter:T.counter+1}))}catch(T){ce.error("Counter increment failed:",T),G.warning("Record created but counter increment failed")}n({})}catch(S){ce.error("Create record failed:",S)}},[ue,V,c,se,Ve,v,n]),es=o.useCallback(S=>{s(S),w(""),j(!0)},[]),ts=o.useCallback(async()=>{if(!t||d.trim()!==t.us_id){G.error("Entered us_id does not match");return}try{M(!0),await Le.deleteRecord(g,t.id),G.success("Record deleted successfully"),j(!1),s(null),w(""),b()}catch(S){ce.error("Delete failed:",S),G.error("Failed to delete record")}finally{M(!1)}},[t,d,g,b]),ss=o.useCallback(async(S,T)=>{try{const _=E.find(Y=>Y.id===S),fe={};if(Object.entries(T).forEach(([Y,ee])=>{ee!==_[Y]&&Y!=="id"&&Y!=="pa_id"&&Y!=="us_id"&&(fe[Y]=ee)}),Object.keys(fe).length===0){G.warning("No changes to save");return}await Le.updateRecord(g,S,v,fe),G.success("Record updated successfully"),b()}catch(_){ce.error("Update failed:",_),G.error("Failed to update record")}},[E,g,v,b]);return c.show==="true"?null:e.jsxs($t,{className:"tableCard shadow-sm border-slate-200 mx-[6rem]",children:[e.jsx(Ut,{className:"pb-3",children:e.jsx(Js,{title:"All Records - "+g.tableName,description:"View and manage all database records",searchTerm:le,onSearchChange:lt,tableName:g.tableName,onCounterUpdate:ge,urlParams:c,dropdownSetupExists:yt,columnOrderExists:Object.keys(We).length>0})}),e.jsxs(qt,{children:[e.jsx("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(sr,{onRefresh:Ee,onAddRecord:ze,onExportCSV:ot,onToggleEdit:()=>D(!L),editEnabled:L,canEdit:i.owner_id===null,isLoading:P,splitOptions:m,onSplitLoad:W}),e.jsx(rr,{uniqueStatuses:J,uniquePriorities:z,statusFilter:oe,priorityFilter:me,onToggleStatus:ve,onTogglePriority:I,onClearStatusFilter:()=>ve([]),onClearPriorityFilter:()=>I([])}),e.jsx(ar,{columns:V,onToggleColumn:xe,onResetVisibility:je,onHideAll:U})]})}),e.jsx(nr,{records:$e,columns:V,loading:P,editEnabled:L,canDelete:i.owner_id===null,onSort:Qe,onDeleteRecord:es,onSaveRecord:ss,sortColumn:u,sortDirection:x,emptyMessage:Ae?"No records match filters":"No records found",onClearFilters:Ae?Z:null}),e.jsx(hr,{currentPage:Pe,setCurrentPage:be,totalPages:Re})]}),e.jsx(Pt,{isOpen:Ie,onClose:Oe,onSubmit:Zt,formData:ue,onFieldChange:He,columns:V,metaData:A,dropdownSetup:Ue,columnOrder:We,processName:c.process_name,isSubmitting:_e,counterConfig:se,setCounterConfig:$,mode:"create",processSteps:K}),e.jsx(Pt,{isOpen:de,onClose:X,onSubmit:Te,formData:ie.formData,onFieldChange:he,columns:ie.columns,metaData:ie.metaData,dropdownSetup:ie.dropdownSetup,columnOrder:ie.columnOrder,processName:null,isSubmitting:_e,counterConfig:se,setCounterConfig:$,mode:"create",itsSplit:!0,processSteps:ie.processSteps||[]}),e.jsx(ir,{isOpen:Q,onClose:()=>j(!1),onConfirm:ts,record:t,confirmInput:d,onConfirmInputChange:w,isDeleting:y})]})},Or=a=>e.jsx(As,{children:e.jsx(fr,{...a})});export{Or as default};
