var rs=Object.defineProperty;var as=(a,r,n)=>r in a?rs(a,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[r]=n;var Rt=(a,r,n)=>as(a,typeof r!="symbol"?r+"":r,n);import{e as nt,R as et,j as e,C as $t,g as Ut,h as zt,k as qt,B as ee,a0 as ns,c as ye,r as o,a1 as V,a as yt,L as Be,I as Fe,i as is,l as Se,x as ls,o as mt,p as xt,q as gt,t as bt,v as We,a9 as Bt,aa as Ht,ab as Vt,ac as Ct,aE as Dt,ad as jt,aF as Wt,aD as os,aB as Gt,_ as it,$ as cs,ar as ds,ak as us}from"./index-D7vkFnLn.js";import{S as hs}from"./switch-DWoCrglO.js";import{S as fs}from"./save-ChyCIT7C.js";import{R as Kt}from"./refresh-cw-rfFvOumJ.js";import{A as ps}from"./CustomTable-CBRDhWGH.js";import{D as Nt,b as vt,c as tt,d as st,f as rt,e as ft}from"./dialog-DAPkADLM.js";import{P as ms}from"./plus-BkTf49et.js";import{S as xs}from"./square-pen-IV59W58z.js";import{C as Xt}from"./checkbox-DdTZ3ii8.js";import{S as gs}from"./sliders-horizontal-DIeKfWCg.js";import{T as bs,a as ws,b as dt,c as Ot,d as ys,e as ut}from"./table-B_v0Wvl0.js";import{T as Yt}from"./trash-2-N7kPm2ut.js";import{T as _s}from"./textarea-CCxhFsyd.js";import{C as Cs}from"./chevron-left-BSDFi5Bk.js";import"./index-BUXfK-yd.js";import"./x-DZVstegp.js";/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Ss=nt("file-spreadsheet",js);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vs=nt("file-text",Ns);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ks=nt("funnel",Es);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Ds=nt("split",Rs);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ts=nt("triangle-alert",Os);class As extends et.Component{constructor(n){super(n);Rt(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,i){this.setState({error:n,errorInfo:i})}render(){return this.state.hasError?e.jsxs($t,{className:"mx-[6rem] mt-8",children:[e.jsx(Ut,{children:e.jsxs(zt,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Ts,{className:"h-5 w-5"}),"Something went wrong"]})}),e.jsxs(qt,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"The table encountered an error. Please try refreshing the page."}),!1,e.jsx(ee,{onClick:this.handleReset,children:"Reload Page"})]})]}):this.props.children}}var pt={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var Is=pt.exports,Tt;function Fs(){return Tt||(Tt=1,function(a,r){((n,i)=>{a.exports=i()})(Is,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},c,m=!i.document&&!!i.postMessage,p=i.IS_PAPA_WORKER||!1,N={},C=0,l={};function g(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var d=le(s);d.chunkSize=parseInt(d.chunkSize),s.step||s.chunk||(d.chunkSize=null),this._handle=new f(d),(this._handle.streamer=this)._config=d}).call(this,t),this.parseChunk=function(s,d){var y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<y){let P=this._config.newline;P||(_=this._config.quoteChar||'"',P=this._handle.guessLineEndings(s,_)),s=[...s.split(P).slice(y)].join(P)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(_=this._config.beforeFirstChunk(s))!==void 0&&(s=_),this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+s,_=(this._partialLine="",this._handle.parse(y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=_.meta.cursor,y=(this._finished||(this._partialLine=y.substring(s-this._baseIndex),this._baseIndex=s),_&&_.data&&(this._rowCount+=_.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),p)i.postMessage({results:_,workerId:l.WORKER_ID,finished:y});else if(j(this._config.chunk)&&!d){if(this._config.chunk(_,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=_=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(_.data),this._completeResults.errors=this._completeResults.errors.concat(_.errors),this._completeResults.meta=_.meta),this._completed||!y||!j(this._config.complete)||_&&_.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),y||_&&_.meta.paused||this._nextChunk(),_}this._halted=!0},this._sendError=function(s){j(this._config.error)?this._config.error(s):p&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:s,finished:!1})}}function v(t){var s;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),g.call(this,t),this._nextChunk=m?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),m||(s.onload=K(this._chunkLoaded,this),s.onerror=K(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!m),this._config.downloadRequestHeaders){var d,y=this._config.downloadRequestHeaders;for(d in y)s.setRequestHeader(d,y[d])}var _;this._config.chunkSize&&(_=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+_));try{s.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}m&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(d){d=s.statusText||d,this._sendError(new Error(d))}}function M(t){(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),g.call(this,t);var s,d,y=typeof FileReader<"u";this.stream=function(_){this._input=_,d=_.slice||_.webkitSlice||_.mozSlice,y?((s=new FileReader).onload=K(this._chunkLoaded,this),s.onerror=K(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),_=d.call(_,this._start,P)),s.readAsText(_,this._config.encoding));y||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(s.error)}}function R(t){var s;g.call(this,t=t||{}),this.stream=function(d){return s=d,this._nextChunk()},this._nextChunk=function(){var d,y;if(!this._finished)return d=this._config.chunkSize,s=d?(y=s.substring(0,d),s.substring(d)):(y=s,""),this._finished=!s,this.parseChunk(y)}}function u(t){g.call(this,t=t||{});var s=[],d=!0,y=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){y&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):d=!0},this._streamData=K(function(_){try{s.push(typeof _=="string"?_:_.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(P){this._streamError(P)}},this),this._streamError=K(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=K(function(){this._streamCleanUp(),y=!0,this._streamData("")},this),this._streamCleanUp=K(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(t){var s,d,y,_,P=Math.pow(2,53),he=-P,_e=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,oe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,L=this,Q=0,E=0,ge=!1,A=!1,T=[],b={data:[],errors:[],meta:{}};function ce($){return t.skipEmptyLines==="greedy"?$.join("").trim()==="":$.length===1&&$[0].length===0}function ae(){if(b&&y&&(je("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),y=!1),t.skipEmptyLines&&(b.data=b.data.filter(function(D){return!ce(D)})),me()){let D=function(de,ne){j(t.transformHeader)&&(de=t.transformHeader(de,ne)),T.push(de)};if(b)if(Array.isArray(b.data[0])){for(var $=0;me()&&$<b.data.length;$++)b.data[$].forEach(D);b.data.splice(0,1)}else b.data.forEach(D)}function B(D,de){for(var ne=t.header?{}:[],X=0;X<D.length;X++){var J=X,z=D[X],z=((Ne,I)=>(re=>(t.dynamicTypingFunction&&t.dynamicTyping[re]===void 0&&(t.dynamicTyping[re]=t.dynamicTypingFunction(re)),(t.dynamicTyping[re]||t.dynamicTyping)===!0))(Ne)?I==="true"||I==="TRUE"||I!=="false"&&I!=="FALSE"&&((re=>{if(_e.test(re)&&(re=parseFloat(re),he<re&&re<P))return 1})(I)?parseFloat(I):oe.test(I)?new Date(I):I===""?null:I):I)(J=t.header?X>=T.length?"__parsed_extra":T[X]:J,z=t.transform?t.transform(z,J):z);J==="__parsed_extra"?(ne[J]=ne[J]||[],ne[J].push(z)):ne[J]=z}return t.header&&(X>T.length?je("FieldMismatch","TooManyFields","Too many fields: expected "+T.length+" fields but parsed "+X,E+de):X<T.length&&je("FieldMismatch","TooFewFields","Too few fields: expected "+T.length+" fields but parsed "+X,E+de)),ne}var se;b&&(t.header||t.dynamicTyping||t.transform)&&(se=1,!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(B),se=b.data.length):b.data=B(b.data,0),t.header&&b.meta&&(b.meta.fields=T),E+=se)}function me(){return t.header&&T.length===0}function je($,B,se,D){$={type:$,code:B,message:se},D!==void 0&&($.row=D),b.errors.push($)}j(t.step)&&(_=t.step,t.step=function($){b=$,me()?ae():(ae(),b.data.length!==0&&(Q+=$.data.length,t.preview&&Q>t.preview?d.abort():(b.data=b.data[0],_(b,L))))}),this.parse=function($,B,se){var D=t.quoteChar||'"',D=(t.newline||(t.newline=this.guessLineEndings($,D)),y=!1,t.delimiter?j(t.delimiter)&&(t.delimiter=t.delimiter($),b.meta.delimiter=t.delimiter):((D=((de,ne,X,J,z)=>{var Ne,I,re,Ie;z=z||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Pe=0;Pe<z.length;Pe++){for(var Re,$e=z[Pe],be=0,De=0,fe=0,we=(re=void 0,new q({comments:J,delimiter:$e,newline:ne,preview:10}).parse(de)),Oe=0;Oe<we.data.length;Oe++)X&&ce(we.data[Oe])?fe++:(Re=we.data[Oe].length,De+=Re,re===void 0?re=Re:0<Re&&(be+=Math.abs(Re-re),re=Re));0<we.data.length&&(De/=we.data.length-fe),(I===void 0||be<=I)&&(Ie===void 0||Ie<De)&&1.99<De&&(I=be,Ne=$e,Ie=De)}return{successful:!!(t.delimiter=Ne),bestDelimiter:Ne}})($,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=D.bestDelimiter:(y=!0,t.delimiter=l.DefaultDelimiter),b.meta.delimiter=t.delimiter),le(t));return t.preview&&t.header&&D.preview++,s=$,d=new q(D),b=d.parse(s,B,se),ae(),ge?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return ge},this.pause=function(){ge=!0,d.abort(),s=j(t.chunk)?"":s.substring(d.getCharIndex())},this.resume=function(){L.streamer._halted?(ge=!1,L.streamer.parseChunk(s,!0)):setTimeout(L.resume,3)},this.aborted=function(){return A},this.abort=function(){A=!0,d.abort(),b.meta.aborted=!0,j(t.complete)&&t.complete(b),s=""},this.guessLineEndings=function(de,D){de=de.substring(0,1048576);var D=new RegExp(x(D)+"([^]*?)"+x(D),"gm"),se=(de=de.replace(D,"")).split("\r"),D=de.split(`
`),de=1<D.length&&D[0].length<se[0].length;if(se.length===1||de)return`
`;for(var ne=0,X=0;X<se.length;X++)se[X][0]===`
`&&ne++;return ne>=se.length/2?`\r
`:"\r"}}function x(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(t){var s=(t=t||{}).delimiter,d=t.newline,y=t.comments,_=t.step,P=t.preview,he=t.fastMode,_e=null,oe=!1,L=t.quoteChar==null?'"':t.quoteChar,Q=L;if(t.escapeChar!==void 0&&(Q=t.escapeChar),(typeof s!="string"||-1<l.BAD_DELIMITERS.indexOf(s))&&(s=","),y===s)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<l.BAD_DELIMITERS.indexOf(y))&&(y=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var E=0,ge=!1;this.parse=function(A,T,b){if(typeof A!="string")throw new Error("Input must be a string");var ce=A.length,ae=s.length,me=d.length,je=y.length,$=j(_),B=[],se=[],D=[],de=E=0;if(!A)return be();if(he||he!==!1&&A.indexOf(L)===-1){for(var ne=A.split(d),X=0;X<ne.length;X++){if(D=ne[X],E+=D.length,X!==ne.length-1)E+=d.length;else if(b)return be();if(!y||D.substring(0,je)!==y){if($){if(B=[],Ie(D.split(s)),De(),ge)return be()}else Ie(D.split(s));if(P&&P<=X)return B=B.slice(0,P),be(!0)}}return be()}for(var J=A.indexOf(s,E),z=A.indexOf(d,E),Ne=new RegExp(x(Q)+x(L),"g"),I=A.indexOf(L,E);;)if(A[E]===L)for(I=E,E++;;){if((I=A.indexOf(L,I+1))===-1)return b||se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:B.length,index:E}),Re();if(I===ce-1)return Re(A.substring(E,I).replace(Ne,L));if(L===Q&&A[I+1]===Q)I++;else if(L===Q||I===0||A[I-1]!==Q){J!==-1&&J<I+1&&(J=A.indexOf(s,I+1));var re=Pe((z=z!==-1&&z<I+1?A.indexOf(d,I+1):z)===-1?J:Math.min(J,z));if(A.substr(I+1+re,ae)===s){D.push(A.substring(E,I).replace(Ne,L)),A[E=I+1+re+ae]!==L&&(I=A.indexOf(L,E)),J=A.indexOf(s,E),z=A.indexOf(d,E);break}if(re=Pe(z),A.substring(I+1+re,I+1+re+me)===d){if(D.push(A.substring(E,I).replace(Ne,L)),$e(I+1+re+me),J=A.indexOf(s,E),I=A.indexOf(L,E),$&&(De(),ge))return be();if(P&&B.length>=P)return be(!0);break}se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:B.length,index:E}),I++}}else if(y&&D.length===0&&A.substring(E,E+je)===y){if(z===-1)return be();E=z+me,z=A.indexOf(d,E),J=A.indexOf(s,E)}else if(J!==-1&&(J<z||z===-1))D.push(A.substring(E,J)),E=J+ae,J=A.indexOf(s,E);else{if(z===-1)break;if(D.push(A.substring(E,z)),$e(z+me),$&&(De(),ge))return be();if(P&&B.length>=P)return be(!0)}return Re();function Ie(fe){B.push(fe),de=E}function Pe(fe){var we=0;return we=fe!==-1&&(fe=A.substring(I+1,fe))&&fe.trim()===""?fe.length:we}function Re(fe){return b||(fe===void 0&&(fe=A.substring(E)),D.push(fe),E=ce,Ie(D),$&&De()),be()}function $e(fe){E=fe,Ie(D),D=[],z=A.indexOf(d,E)}function be(fe){if(t.header&&!T&&B.length&&!oe){var we=B[0],Oe={},He=new Set(we);let Ge=!1;for(let Te=0;Te<we.length;Te++){let ke=we[Te];if(Oe[ke=j(t.transformHeader)?t.transformHeader(ke,Te):ke]){let Ue,Ke=Oe[ke];for(;Ue=ke+"_"+Ke,Ke++,He.has(Ue););He.add(Ue),we[Te]=Ue,Oe[ke]++,Ge=!0,(_e=_e===null?{}:_e)[Ue]=ke}else Oe[ke]=1,we[Te]=ke;He.add(ke)}oe=!0}return{data:B,errors:se,meta:{delimiter:s,linebreak:d,aborted:ge,truncated:!!fe,cursor:de+(T||0),renamedHeaders:_e}}}function De(){_(be()),B=[],se=[]}},this.abort=function(){ge=!0},this.getCharIndex=function(){return E}}function te(t){var s=t.data,d=N[s.workerId],y=!1;if(s.error)d.userError(s.error,s.file);else if(s.results&&s.results.data){var _={abort:function(){y=!0,U(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(j(d.userStep)){for(var P=0;P<s.results.data.length&&(d.userStep({data:s.results.data[P],errors:s.results.errors,meta:s.results.meta},_),!y);P++);delete s.results}else j(d.userChunk)&&(d.userChunk(s.results,_,s.file),delete s.results)}s.finished&&!y&&U(s.workerId,s.results)}function U(t,s){var d=N[t];j(d.userComplete)&&d.userComplete(s),d.terminate(),delete N[t]}function W(){throw new Error("Not implemented.")}function le(t){if(typeof t!="object"||t===null)return t;var s,d=Array.isArray(t)?[]:{};for(s in t)d[s]=le(t[s]);return d}function K(t,s){return function(){t.apply(s,arguments)}}function j(t){return typeof t=="function"}return l.parse=function(t,s){var d=(s=s||{}).dynamicTyping||!1;if(j(d)&&(s.dynamicTypingFunction=d,d={}),s.dynamicTyping=d,s.transform=!!j(s.transform)&&s.transform,!s.worker||!l.WORKERS_SUPPORTED)return d=null,l.NODE_STREAM_INPUT,typeof t=="string"?(t=(y=>y.charCodeAt(0)!==65279?y:y.slice(1))(t),d=new(s.download?v:R)(s)):t.readable===!0&&j(t.read)&&j(t.on)?d=new u(s):(i.File&&t instanceof File||t instanceof Object)&&(d=new M(s)),d.stream(t);(d=(()=>{var y;return!!l.WORKERS_SUPPORTED&&(y=(()=>{var _=i.URL||i.webkitURL||null,P=n.toString();return l.BLOB_URL||(l.BLOB_URL=_.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(y=new i.Worker(y)).onmessage=te,y.id=C++,N[y.id]=y)})()).userStep=s.step,d.userChunk=s.chunk,d.userComplete=s.complete,d.userError=s.error,s.step=j(s.step),s.chunk=j(s.chunk),s.complete=j(s.complete),s.error=j(s.error),delete s.worker,d.postMessage({input:t,config:s,workerId:d.id})},l.unparse=function(t,s){var d=!1,y=!0,_=",",P=`\r
`,he='"',_e=he+he,oe=!1,L=null,Q=!1,E=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||l.BAD_DELIMITERS.filter(function(T){return s.delimiter.indexOf(T)!==-1}).length||(_=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(d=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(oe=s.skipEmptyLines),typeof s.newline=="string"&&(P=s.newline),typeof s.quoteChar=="string"&&(he=s.quoteChar),typeof s.header=="boolean"&&(y=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");L=s.columns}s.escapeChar!==void 0&&(_e=s.escapeChar+he),s.escapeFormulae instanceof RegExp?Q=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(Q=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(he),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return ge(null,t,oe);if(typeof t[0]=="object")return ge(L||Object.keys(t[0]),t,oe)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||L),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),ge(t.fields||[],t.data||[],oe);throw new Error("Unable to serialize unrecognized input");function ge(T,b,ce){var ae="",me=(typeof T=="string"&&(T=JSON.parse(T)),typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(T)&&0<T.length),je=!Array.isArray(b[0]);if(me&&y){for(var $=0;$<T.length;$++)0<$&&(ae+=_),ae+=A(T[$],$);0<b.length&&(ae+=P)}for(var B=0;B<b.length;B++){var se=(me?T:b[B]).length,D=!1,de=me?Object.keys(b[B]).length===0:b[B].length===0;if(ce&&!me&&(D=ce==="greedy"?b[B].join("").trim()==="":b[B].length===1&&b[B][0].length===0),ce==="greedy"&&me){for(var ne=[],X=0;X<se;X++){var J=je?T[X]:X;ne.push(b[B][J])}D=ne.join("").trim()===""}if(!D){for(var z=0;z<se;z++){0<z&&!de&&(ae+=_);var Ne=me&&je?T[z]:z;ae+=A(b[B][Ne],z)}B<b.length-1&&(!ce||0<se&&!de)&&(ae+=P)}}return ae}function A(T,b){var ce,ae;return T==null?"":T.constructor===Date?JSON.stringify(T).slice(1,25):(ae=!1,Q&&typeof T=="string"&&Q.test(T)&&(T="'"+T,ae=!0),ce=T.toString().replace(E,_e),(ae=ae||d===!0||typeof d=="function"&&d(T,b)||Array.isArray(d)&&d[b]||((me,je)=>{for(var $=0;$<je.length;$++)if(-1<me.indexOf(je[$]))return!0;return!1})(ce,l.BAD_DELIMITERS)||-1<ce.indexOf(_)||ce.charAt(0)===" "||ce.charAt(ce.length-1)===" ")?he+ce+he:ce)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!m&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=q,l.ParserHandle=f,l.NetworkStreamer=v,l.FileStreamer=M,l.StringStreamer=R,l.ReadableStreamStreamer=u,i.jQuery&&((c=i.jQuery).fn.parse=function(t){var s=t.config||{},d=[];return this.each(function(P){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var he=0;he<this.files.length;he++)d.push({file:this.files[he],inputElem:this,instanceConfig:c.extend({},s)})}),y(),this;function y(){if(d.length===0)j(t.complete)&&t.complete();else{var P,he,_e,oe,L=d[0];if(j(t.before)){var Q=t.before(L.file,L.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return P="AbortError",he=L.file,_e=L.inputElem,oe=Q.reason,void(j(t.error)&&t.error({name:P},he,_e,oe));if(Q.action==="skip")return void _();typeof Q.config=="object"&&(L.instanceConfig=c.extend(L.instanceConfig,Q.config))}else if(Q==="skip")return void _()}var E=L.instanceConfig.complete;L.instanceConfig.complete=function(ge){j(E)&&E(ge,L.file,L.inputElem),_()},l.parse(L.file,L.instanceConfig)}}function _(){d.splice(0,1),y()}}),p&&(i.onmessage=function(t){t=t.data,l.WORKER_ID===void 0&&t&&(l.WORKER_ID=t.workerId),typeof t.input=="string"?i.postMessage({workerId:l.WORKER_ID,results:l.parse(t.input,t.config),finished:!0}):(i.File&&t.input instanceof File||t.input instanceof Object)&&(t=l.parse(t.input,t.config))&&i.postMessage({workerId:l.WORKER_ID,results:t,finished:!0})}),(v.prototype=Object.create(g.prototype)).constructor=v,(M.prototype=Object.create(g.prototype)).constructor=M,(R.prototype=Object.create(R.prototype)).constructor=R,(u.prototype=Object.create(g.prototype)).constructor=u,l})}(pt)),pt.exports}var Ls=Fs();const Ms=ns(Ls),ue={debug:(...a)=>{},info:(...a)=>{},warn:(...a)=>{},error:(...a)=>{},group:(a,r)=>{}},qe="https://click.wa.expert/api",Le={fetchRecords:async a=>{try{ue.debug("Fetching records with params:",a);const r=await ye.post(`${qe}/data/getAllData`,a);return{data:r.data.data||[],columns:r.data.columns||[],success:!0}}catch(r){throw ue.error("Error fetching records:",r),r}},fetchPaymentRecords:async a=>{try{const r=await ye.get(`${qe}/payment-reminders/list?owner_id=${a}`);return{data:r.data.data||r.data||[],success:!0}}catch(r){throw ue.error("Error fetching payment records:",r),r}},fetchRecordById:async(a,r)=>{try{const n=decodeURIComponent(r);return{data:(await ye.post(`${qe}/data/getRecordById`,{schemaName:a.schemaName,tableName:a.tableName,id:n})).data,success:!0}}catch(n){return ue.error("Error fetching record by ID:",n),{data:null,success:!1,error:n.message}}},createRecord:async(a,r)=>{try{return{data:(await ye.post(`${qe}/data/createRecord`,{schemaName:a.schemaName,tableName:a.tableName,record:r})).data,success:!0}}catch(n){throw ue.error("Error creating record:",n),n}},createPaymentReminder:async a=>{try{return{data:(await ye.post(`${qe}/payment-reminders/add`,a,{headers:{"Content-Type":"application/json"}})).data,success:!0}}catch(r){throw ue.error("Error creating payment reminder:",r),r}},updateRecord:async(a,r,n,i)=>{try{return{data:(await ye.post(`${qe}/data/updateMultiple`,{schemaName:a.schemaName,tableName:a.tableName,recordId:r,ownerId:n,updates:i},{headers:{"Content-Type":"application/json"}})).data,success:!0}}catch(c){throw ue.error("Error updating record:",c),c}},deleteRecord:async(a,r)=>{try{const n=new URLSearchParams({id:r,schemaName:a.schemaName,tableName:a.tableName});return{data:(await ye.get(`${qe}/data/deleteRecord?${n.toString()}`)).data,success:!0}}catch(n){throw ue.error("Error deleting record:",n),n}},fetchDropdownSetup:async(a,r)=>{try{const n=await ye.get(`${qe}/reference/setup/check?owner_id=${a}&product_name=${r}`);return n.data.exists&&n.data.setup?{mapping:n.data.setup.mapping||{},columnOrder:n.data.setup.columnOrder||{},exists:!0,success:!0}:{mapping:{},columnOrder:{},exists:!1,success:!0}}catch(n){return ue.error("Error fetching dropdown setup:",n),{mapping:{},columnOrder:{},exists:!1,success:!1}}}},Ps={DEFAULT_PAGE_SIZE:20},Ce={TEXT:"text",NUMBER:"number",EMAIL:"email",PHONE:"tel",URL:"url",DATE:"date",TEXTAREA:"textarea",CHECKBOX:"checkbox",SELECT_STATUS:"select-status",SELECT_PRIORITY:"select-priority"},_t={PENDING:"pending",IN_PROGRESS:"in progress",COMPLETED:"completed"},Ye={LOW:"low",MEDIUM:"medium",HIGH:"high"},Qt={[_t.PENDING]:"bg-yellow-100 text-yellow-700 border-yellow-200",[_t.IN_PROGRESS]:"bg-blue-100 text-blue-700 border-blue-200",[_t.COMPLETED]:"bg-green-100 text-green-700 border-green-200",default:"bg-gray-100 text-gray-700 border-gray-200"},Jt={[Ye.HIGH]:"bg-red-100 text-red-700 border-red-200",[Ye.MEDIUM]:"bg-orange-100 text-orange-700 border-orange-200",[Ye.LOW]:"bg-green-100 text-green-700 border-green-200",default:"bg-gray-100 text-gray-700 border-gray-200"},$s=["invoice","date","due_date","final_due_date","last_overdue_reminder_date","sent_at","created_at","updated_at"],Us=["out_webhooks","emails"],ht={PA_ID:"pa_id",US_ID:"us_id"},zs=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),qs=(a,r)=>{const n=r.toLowerCase();return n.includes("email")?Ce.EMAIL:n.includes("phone")?Ce.PHONE:n.includes("url")||n.includes("link")||n.includes("invoice_url")?Ce.URL:n==="status"?Ce.SELECT_STATUS:n==="priority"?Ce.SELECT_PRIORITY:n.includes("description")||n.includes("notes")||n.includes("comment")?Ce.TEXTAREA:n.includes("date")||n.includes("created")||n.includes("updated")||n==="invoice"?Ce.DATE:typeof a=="number"?Ce.NUMBER:typeof a=="boolean"?Ce.CHECKBOX:a&&a.length>100?Ce.TEXTAREA:Ce.TEXT},St=()=>Date.now().toString(),wt=(a,r)=>r[a==null?void 0:a.toLowerCase()]||r.default,At=(a,r=null)=>a.filter(n=>{if(n.id==="id"||n.id.includes("_comment")||n.id.includes("created_at")||n.id.includes("updated_at"))return!1;if(r){const i=n.id.toLowerCase(),c=n.name.toLowerCase();if(i.includes("balance")||c.includes("balance"))return!1}return!0}),It=(a,r={})=>a.filter(n=>r[n.id]!==0).sort((n,i)=>{const c=r[n.id]||999,m=r[i.id]||999;return c!==m?c-m:n.name.localeCompare(i.name)}),Bs=(a,r=[],n=[])=>Object.fromEntries(Object.entries(a).map(([i,c])=>r.includes(i)?[i,c===""?null:c]:n.includes(i)?c===""?[i,null]:[i,c]:[i,c===""?null:c])),Hs=(a,r=[])=>Object.fromEntries(Object.entries(a).filter(([n,i])=>i!=null&&i!==""?!0:r.includes(n))),Vs=(a,r="normal",n)=>{const[i,c]=o.useState([]),[m,p]=o.useState([]),[N,C]=o.useState([]),[l,g]=o.useState({}),[v,M]=o.useState(!0),R=o.useCallback(async()=>{try{M(!0),ue.debug("Fetching table data",{apiParams:a,type:r});let u;r==="normal"?(u=await Le.fetchRecords(a),g(u.columns)):u=await Le.fetchPaymentRecords(n);let f=u.data||[];if(r==="payment"&&(f=f.filter(x=>x.type==="original"||x.type==="Original")),p(f),c(f),f.length>0){const x=f[0],q=Object.keys(x).map(te=>({id:te,name:zs(te),sortable:!0,visible:!0,type:qs(x[te],te)}));C(q)}else C([])}catch(u){ue.error("Error fetching table data:",u),V.error("Failed to fetch records"),p([]),c([]),C([])}finally{M(!1)}},[a.schemaName,a.tableName,r,n]);return o.useEffect(()=>{R()},[R]),{records:i,setRecords:c,originalRecords:m,columns:N,setColumns:C,metaData:l,loading:v,fetchData:R,refreshData:R}},Ft="https://click.wa.expert/api",Lt={async fetch(a,r){var n;try{const i=`${a}_${r}`,c=await ye.post(`${Ft}/data/getRecordById`,{id:i,schemaName:"public",tableName:"column_preferences"});let m=c.data.column_visibility;if(typeof m=="string")try{m=JSON.parse(m)}catch{return null}return{...c.data,column_visibility:m}}catch(i){return((n=i.response)==null?void 0:n.status)===404,null}},async save(a,r,n,i){var m;try{const p=`${a}_${r}`,N=JSON.stringify(n),C=`${Ft}/data/createRecord`,l={schemaName:"public",tableName:"column_preferences",record:{us_id:p,owner_id:a,table_name:r,schema_name:i,column_visibility:N,updated_at:new Date().toISOString()}};return{success:!0,data:(await ye.post(C,l)).data}}catch(p){return{success:!1,error:((m=p.response)==null?void 0:m.data)||p.message}}}},Ws=(a,r,n,i)=>{const[c,m]=o.useState(i),[p,N]=o.useState(!1),C=o.useCallback(async()=>{try{const u=await Lt.fetch(a,r);return u&&u.column_visibility?(ue.debug("Loaded column preferences:",u.column_visibility),u.column_visibility):null}catch(u){return ue.error("Error loading column preferences:",u),null}},[a,r]),l=o.useCallback((u,f)=>f?u.map(x=>{const q=f[x.id]!==void 0?f[x.id]:!0;return{...x,visible:q}}):u,[]),g=o.useCallback(async u=>{try{const f={};u.forEach(q=>{f[q.id]=q.visible}),(await Lt.save(a,r,f,n)).success&&(ue.debug("Column preferences saved successfully"),V.success("Column preferences saved"))}catch(f){ue.error("Error saving column preferences:",f),V.error("Failed to save column preferences")}},[a,r,n]),v=o.useCallback(async u=>{const f=c.map(x=>x.id===u?{...x,visible:!x.visible}:x);m(f),await g(f)},[c,g]),M=o.useCallback(async()=>{const u=c.map(f=>({...f,visible:!0}));m(u),await g(u),V.success("Column visibility reset to default")},[c,g]),R=o.useCallback(async()=>{const u=c.map(f=>({...f,visible:!1}));m(u),await g(u),V.success("All columns hidden")},[c,g]);return o.useEffect(()=>{(async()=>{if(!p&&i.length>0){const f=await C(),x=l(i,f);m(x),N(!0)}})()},[i,p,C,l]),o.useEffect(()=>{i.length>0&&!p&&m(i)},[i,p]),{columns:c,setColumns:m,toggleColumnVisibility:v,resetColumnVisibility:M,hideAllColumns:R,visibleColumns:c.filter(u=>u.visible)}},Gs=a=>{const[r,n]=o.useState(""),[i,c]=o.useState([]),[m,p]=o.useState([]),N=o.useMemo(()=>{if(!a.length)return[];let u=[...a];if(r.trim()!==""){const f=r.toLowerCase();u=u.filter(x=>Object.values(x).some(q=>String(q).toLowerCase().includes(f)))}return i.length>0&&(u=u.filter(f=>i.includes(f.status))),m.length>0&&(u=u.filter(f=>m.includes(f.priority))),ue.debug("Filtered records:",{original:a.length,filtered:u.length,searchTerm:r,statusFilter:i,priorityFilter:m}),u},[a,r,i,m]),C=o.useMemo(()=>Array.from(new Set(a.map(u=>u.status))).filter(Boolean),[a]),l=o.useMemo(()=>Array.from(new Set(a.map(u=>u.priority))).filter(Boolean),[a]),g=o.useCallback(u=>{c(f=>f.includes(u)?f.filter(x=>x!==u):[...f,u])},[]),v=o.useCallback(u=>{p(f=>f.includes(u)?f.filter(x=>x!==u):[...f,u])},[]),M=o.useCallback(()=>{n(""),c([]),p([])},[]),R=o.useMemo(()=>r!==""||i.length>0||m.length>0,[r,i,m]);return{searchTerm:r,setSearchTerm:n,statusFilter:i,setStatusFilter:c,priorityFilter:m,setPriorityFilter:p,filteredRecords:N,uniqueStatuses:C,uniquePriorities:l,toggleStatusFilter:g,togglePriorityFilter:v,clearFilters:M,hasActiveFilters:R}},Ks=(a,r=Ps.DEFAULT_PAGE_SIZE)=>{const[n,i]=o.useState(1),[c,m]=o.useState(r),p=a.length,N=Math.ceil(p/c),C=o.useMemo(()=>{const u=n*c,f=u-c;return a.slice(f,u)},[a,n,c]),l=o.useCallback(u=>{const f=Math.max(1,Math.min(u,N));i(f)},[N]),g=o.useCallback(()=>{n<N&&i(u=>u+1)},[n,N]),v=o.useCallback(()=>{n>1&&i(u=>u-1)},[n]),M=o.useCallback(u=>{m(u),i(1)},[]),R=o.useCallback(()=>{i(1),m(r)},[r]);return{currentPage:n,pageSize:c,totalRecords:p,totalPages:N,currentRecords:C,setCurrentPage:l,nextPage:g,previousPage:v,changePageSize:M,resetPagination:R}},Xs=(a,r,n)=>{const[i,c]=o.useState({}),[m,p]=o.useState(!1),[N,C]=o.useState(!1),l=o.useCallback((f={})=>{c(f)},[]),g=o.useCallback((f,x)=>{c(q=>({...q,[f]:x}))},[]),v=o.useCallback(()=>{c({})},[]),M=o.useCallback(async(f={})=>{try{p(!0);const x={...i,...f};ue.debug("Submitting form data:",x);const q=Bs(x,$s,Us),U=Hs(q,["status","type"]);ue.debug("Cleaned record data:",U);let W;return r==="payment"?W=await Le.createPaymentReminder(U):W=await Le.createRecord(a,U),V.success("Record created successfully!"),n&&n(W.data),v(),C(!1),W}catch(x){throw ue.error("Error submitting form:",x),x.response?V.error(`Failed to create record: ${x.response.data.error||x.response.data.message||"Unknown error"}`):V.error(`Failed to create record: ${x.message}`),x}finally{p(!1)}},[i,a,r,n,v]),R=o.useCallback((f={})=>{l(f),C(!0)},[l]),u=o.useCallback(()=>{C(!1),v()},[v]);return{formData:i,isSubmitting:m,isOpen:N,initializeForm:l,handleFieldChange:g,resetForm:v,submitForm:M,openForm:R,closeForm:u}},Ys=(a,r)=>{const[n,i]=o.useState({}),[c,m]=o.useState({}),[p,N]=o.useState(!1),[C,l]=o.useState(!0),g=o.useCallback(async()=>{try{l(!0);const u=await Le.fetchDropdownSetup(a,r);u.exists?(i(u.mapping),m(u.columnOrder),N(!0),ue.debug("Dropdown setup loaded:",{mapping:u.mapping,columnOrder:u.columnOrder})):(i({}),m({}),N(!1))}catch(u){ue.error("Error fetching dropdown setup:",u),i({}),m({}),N(!1)}finally{l(!1)}},[a,r]),v=o.useCallback(u=>n[u]||[],[n]),M=o.useCallback(u=>{const f=n[u];return Array.isArray(f)&&f.length>0},[n]),R=o.useCallback(u=>c[u]||999,[c]);return o.useEffect(()=>{a&&r&&g()},[a,r,g]),{dropdownSetup:n,columnOrder:c,setupExists:p,loading:C,fetchSetup:g,getDropdownOptions:v,hasDropdown:M,getColumnOrder:R}},Qs=({tableName:a="jobstatus",onCounterUpdate:r})=>{const[n,i]=o.useState(0),[c,m]=o.useState(""),[p,N]=o.useState(!1),[C,l]=o.useState(!1),[g,v]=o.useState(!1),[M,R]=o.useState(null),u=yt(U=>U.user),f=u.owner_id===null?u.id:u.owner_id,x=async()=>{try{v(!0);const U="https://click.wa.expert/api/data/getRecordById",le={id:`${f}_${a}`,schemaName:"public",tableName:"counter_setup"},{data:K}=await ye.post(U,le);if(K){const j=parseInt(K.counter,10)||0;i(j),m(K.prefix||""),N(K.is_active||!1),R(K.id),r&&r({counter:j,prefix:K.prefix||"",isActive:K.is_active||!1,recordId:K.id})}}catch{i(1),m(""),N(!1),R(null),await q()}finally{v(!1)}},q=async()=>{try{const U="https://click.wa.expert/api/data/createRecord",le={schemaName:"public",tableName:"counter_setup",record:{us_id:`${f}_${a}`,owner_id:f,table_name:a,prefix:"",counter:1,is_active:!1}},{data:K}=await ye.post(U,le);await x()}catch{}},te=async()=>{try{l(!0);const U=parseInt(n,10),W="https://click.wa.expert/api/data/createRecord",le=`${f}_${a}`,K={schemaName:"public",tableName:"counter_setup",record:{us_id:le,owner_id:f,table_name:a,prefix:c,counter:U,is_active:p,updated_at:new Date().toISOString()}};await ye.post(W,K),V.success("Counter settings saved successfully"),r&&r({counter:U,prefix:c,isActive:p,recordId:M||le}),await x()}catch{V.error("Failed to save counter settings")}finally{l(!1)}};return o.useEffect(()=>{x()},[a]),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(hs,{id:"counter-active",checked:p,onCheckedChange:N}),e.jsx(Be,{htmlFor:"counter-active",className:"text-sm font-medium whitespace-nowrap",children:"Auto Counter"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[120px]",children:[e.jsx(Be,{htmlFor:"prefix",className:"text-sm whitespace-nowrap",children:"Prefix:"}),e.jsx(Fe,{id:"prefix",type:"text",value:c,onChange:U=>m(U.target.value),placeholder:"INV",className:"h-9"})]}),p&&e.jsxs("div",{className:"text-sm bg-blue-50 px-2 py-1.5 rounded border border-blue-200 flex w-[10rem] items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Next : "}),e.jsxs("span",{className:"font-mono font-semibold text-blue-700",children:[c,n]})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[e.jsx(ee,{onClick:te,disabled:C,size:"sm",variant:"default",children:e.jsx(fs,{className:"h-3.5 w-3.5"})}),e.jsx(ee,{onClick:x,disabled:g,variant:"outline",size:"sm",children:e.jsx(Kt,{className:`h-3.5 w-3.5 ${g?"animate-spin":""}`})})]})]})})})},Js=({title:a="All Records",description:r="View and manage all database records",searchTerm:n="",onSearchChange:i,tableName:c,onCounterUpdate:m,urlParams:p={},dropdownSetupExists:N=!1,columnOrderExists:C=!1})=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{className:"w-[95%]",children:[e.jsxs("div",{className:"flex md:flex-row md:items-center justify-between w-full",children:[e.jsx(zt,{className:"text-2xl font-semibold text-slate-700",children:a}),e.jsx("div",{className:"lg:flex-1 lg:max-w-[500px]",children:e.jsx(Qs,{tableName:c,onCounterUpdate:m})})]}),e.jsxs(is,{className:"mt-1",children:[r,p.pa_id&&e.jsx("div",{className:"flex gap-2 mt-1",children:e.jsxs(Se,{variant:"outline",className:"text-xs bg-green-50 border-green-200",children:["PA ID: ",p.pa_id]})}),p.process_name&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs(Se,{variant:"outline",className:"text-xs bg-purple-50 border-purple-200",children:["Process: ",p.process_name]}),e.jsxs(Se,{variant:"outline",className:"text-xs bg-blue-50 border-blue-200",children:[p.process_name,"_balance"]})]}),N&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(Se,{variant:"outline",className:"text-xs",children:"Dropdown Configured"}),C&&e.jsxs(Se,{variant:"outline",className:"text-xs bg-blue-50 border-blue-200",children:[e.jsx(ps,{className:"h-3 w-3 mr-1"}),"Custom Order"]})]})]})]})}),e.jsx("div",{className:"flex flex-col lg:flex-row items-stretch lg:items-end gap-3",children:e.jsxs("div",{className:"relative lg:w-[300px]",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(Fe,{type:"text",placeholder:"Search records...",value:n,onChange:i,className:"pl-9"})]})})]}),Zs=250,er="https://click.wa.expert/api",tr=({value:a,onChange:r,placeholder:n="Enter the ID"})=>{const[i,c]=o.useState(!1),[m,p]=o.useState("jobstatus"),[N,C]=o.useState([]),[l,g]=o.useState(!1),v=o.useRef(!1),M=yt(x=>x.user),R=(M==null?void 0:M.schema_name)||"default_schema";o.useEffect(()=>{if(!a||!a.trim()){C([]),g(!1);return}if(v.current){v.current=!1;return}if(!l)return;const x=new AbortController,q=setTimeout(async()=>{var te;try{const{data:U}=await ye.post(`${er}/additional/search`,{schemaName:R,tableName:m,query:a,userId:M.id,userEmail:M.email},{signal:x.signal}),W=(U==null?void 0:U.data)||[];C(W),(te=U.data)!=null&&te.table_name&&p(U.data.table_name),g(W.length>0)}catch(U){U.name!=="CanceledError"&&U.name}},Zs);return()=>{clearTimeout(q),x.abort()}},[a,m,R,l,M.id,M.email]);const u=o.useCallback((x,q)=>{v.current=!0,r(x),p(q),C([]),g(!1)},[r]),f=o.useCallback(x=>{v.current=!1,r(x.target.value),g(!0)},[r]);return e.jsxs("div",{className:"relative w-full",children:[e.jsx(Fe,{type:"text",value:a,onChange:f,className:"bg-gray-50 text-gray-700",placeholder:n,"aria-label":"Search ID",disabled:i,autoComplete:"off"}),l&&N.length>0&&e.jsx("ul",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-48 overflow-y-auto shadow-md",children:N.map((x,q)=>e.jsx("li",{className:"px-3 py-2 cursor-pointer hover:bg-gray-100 text-sm",onClick:()=>u(x.us_id,x.table_name),children:x.us_id},x.us_id||q))})]})},sr=({onRefresh:a,onAddRecord:r,onExportCSV:n,onToggleEdit:i,editEnabled:c=!1,canEdit:m=!0,isLoading:p=!1,splitOptions:N=[],onSplitLoad:C})=>{const[l,g]=et.useState(!1),[v,M]=et.useState(""),[R,u]=et.useState(""),[f,x]=et.useState(!1),q=()=>{g(!0)},te=()=>{g(!1),M(""),u("")},U=async()=>{if(v&&R.trim()&&C){x(!0);try{await C(v,R.trim()),g(!1),M(""),u("")}catch{}finally{x(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ee,{className:"flex items-center gap-2",onClick:r,disabled:p,children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Record"})]}),e.jsxs(ee,{className:"flex items-center gap-2",onClick:q,disabled:p,children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Split"})]}),e.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:a,disabled:p,children:[e.jsx(Kt,{className:`h-4 w-4 ${p?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:n,disabled:p,children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]}),m&&e.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:i,disabled:p,children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:c?"Editing":"Edit"}),c&&e.jsx(Se,{className:"ml-1 bg-blue-500",children:"ON"})]})]}),e.jsx(Nt,{open:l,onOpenChange:g,children:e.jsxs(vt,{className:"sm:max-w-md",children:[e.jsx(tt,{children:e.jsx(st,{children:"Add Split Record"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Be,{className:"text-sm font-medium",children:"Parent ID (pa_id):"}),e.jsx(tr,{value:R,onChange:u,placeholder:"Enter parent ID"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Be,{className:"text-sm font-medium",children:"Select Table:"}),e.jsxs(mt,{value:v,onValueChange:M,disabled:f,children:[e.jsx(xt,{className:"w-full",children:e.jsx(gt,{placeholder:"Select a table"})}),e.jsx(bt,{children:N.length>0?N.map((W,le)=>e.jsx(We,{value:W.value||W,children:W.label||W},W.value||le)):e.jsx(We,{value:"no-options",disabled:!0,children:"No options available"})})]})]})]}),e.jsxs(rt,{className:"gap-2 sm:gap-0",children:[e.jsx(ee,{variant:"outline",onClick:te,disabled:f,children:"Cancel"}),e.jsx(ee,{onClick:U,disabled:!v||!R.trim()||f,children:f?"Loading...":"Load Form"})]})]})})]})},rr=({uniqueStatuses:a=[],uniquePriorities:r=[],statusFilter:n=[],priorityFilter:i=[],onToggleStatus:c,onTogglePriority:m,onClearStatusFilter:p,onClearPriorityFilter:N})=>{const C=n.length+i.length;return e.jsxs(Bt,{children:[e.jsx(Ht,{asChild:!0,children:e.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),C>0&&e.jsx(Se,{className:"ml-1 py-0 px-1.5 h-5 min-w-5 bg-blue-500 text-white rounded-full",children:C})]})}),e.jsxs(Vt,{align:"start",className:"w-56",children:[e.jsxs(Ct,{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Filter by Status"}),n.length>0&&e.jsx(ee,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:p,children:"Clear"})]}),a.length>0?a.map(l=>e.jsxs(Dt,{checked:n.includes(l),onCheckedChange:()=>c(l),children:[e.jsx(Se,{className:`font-medium mr-2 ${wt(l,Qt)}`,children:l}),e.jsx("span",{children:l})]},l)):e.jsx(jt,{disabled:!0,children:"No statuses available"}),e.jsx(Wt,{}),e.jsxs(Ct,{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Filter by Priority"}),i.length>0&&e.jsx(ee,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:N,children:"Clear"})]}),r.length>0?r.map(l=>e.jsxs(Dt,{checked:i.includes(l),onCheckedChange:()=>m(l),children:[e.jsx(Se,{className:`font-medium mr-2 ${wt(l,Jt)}`,children:l}),e.jsx("span",{children:l})]},l)):e.jsx(jt,{disabled:!0,children:"No priorities available"})]})]})},ar=({columns:a=[],onToggleColumn:r,onResetVisibility:n,onHideAll:i})=>e.jsxs(Bt,{children:[e.jsx(Ht,{asChild:!0,children:e.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Columns"})]})}),e.jsxs(Vt,{align:"start",className:"w-56",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[e.jsx(Ct,{className:"p-0",children:"Toggle Columns"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ee,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:c=>{c.stopPropagation(),i()},children:"Hide All"}),e.jsx(ee,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:c=>{c.stopPropagation(),n()},children:"Reset"})]})]}),e.jsx(Wt,{}),a.map(c=>e.jsx(jt,{onSelect:m=>{m.preventDefault(),r(c.id)},children:e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx(Xt,{checked:c.visible,onCheckedChange:()=>r(c.id)}),e.jsx("span",{className:"flex-1",children:c.name}),!c.visible&&e.jsx(Se,{variant:"secondary",className:"text-xs",children:"Hidden"})]})},c.id))]})]}),nr=({records:a=[],columns:r=[],loading:n=!1,editEnabled:i=!1,canDelete:c=!1,onSort:m,onDeleteRecord:p,onEditRecord:N,onSaveRecord:C,sortColumn:l=null,sortDirection:g="asc",emptyMessage:v="No records found",onClearFilters:M})=>{const[R,u]=o.useState(null),[f,x]=o.useState({}),q=o.useCallback(j=>{i&&(u(j.id),x(j),N&&N(j))},[i,N]),te=o.useCallback(()=>{C&&C(R,f),u(null),x({})},[R,f,C]),U=o.useCallback(()=>{u(null),x({})},[]),W=o.useCallback((j,t)=>{x(s=>({...s,[j]:t}))},[]),le=(j,t)=>{const s=j[t.id];return R===j.id&&t.id!=="id"&&i?e.jsx(Fe,{type:"text",value:f[t.id]||"",onChange:d=>W(t.id,d.target.value),className:"border rounded px-2 py-1 w-full",onClick:d=>d.stopPropagation()}):t.id==="status"?e.jsx(Se,{className:`font-medium ${wt(s,Qt)}`,children:s}):t.id==="priority"?e.jsx(Se,{className:`font-medium ${wt(s,Jt)}`,children:s}):t.id==="task_file"&&s?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:s})]}):e.jsx("span",{children:s||"â€”"})},K=r.filter(j=>j.visible);return e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(bs,{children:[e.jsx(ws,{children:e.jsxs(dt,{className:"bg-slate-50",children:[c&&e.jsx(Ot,{className:"w-[60px] text-center",children:"Delete"}),K.map(j=>e.jsx(Ot,{className:`${j.sortable?"cursor-pointer hover:bg-slate-100":""}`,onClick:()=>j.sortable&&m&&m(j.id),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:j.name}),l===j.id&&e.jsx(os,{className:`h-4 w-4 transition-transform ${g==="desc"?"rotate-180":""}`})]})},j.id))]})}),e.jsx(ys,{children:n?e.jsx(dt,{children:e.jsx(ut,{colSpan:K.length+(c?1:0),className:"h-24 text-center",children:"Loading records..."})}):a.length===0?e.jsx(dt,{children:e.jsxs(ut,{colSpan:K.length+(c?1:0),className:"h-24 text-center",children:[v,M&&e.jsx(ee,{variant:"link",onClick:M,className:"ml-2",children:"Clear filters?"})]})}):a.map((j,t)=>e.jsxs(dt,{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>q(j),children:[c&&e.jsx(ut,{className:"w-[60px] text-center",children:e.jsx(ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:s=>{s.stopPropagation(),p&&p(j)},children:e.jsx(Yt,{className:"h-4 w-4"})})}),K.map(s=>e.jsx(ut,{children:le(j,s)},s.id))]},j.id||t))})]})}),R&&i&&e.jsxs("div",{className:"flex gap-2 p-3 bg-slate-50 border-t",children:[e.jsx(ee,{size:"sm",onClick:te,children:"Save Changes"}),e.jsx(ee,{size:"sm",variant:"ghost",onClick:U,children:"Cancel"})]})]})},Mt=({column:a,value:r,onChange:n,dropdownOptions:i=[],isAutoFilled:c=!1,disabled:m=!1})=>{const{id:p,type:N,name:C}=a;if(c)return e.jsx(Fe,{id:p,type:"text",value:r||"",disabled:!0,className:"bg-gray-50 cursor-not-allowed text-gray-600",placeholder:`Auto-filled ${C.toLowerCase()}`});if(i.length>0)return e.jsxs(mt,{value:r||"",onValueChange:l=>n(p,l),disabled:m,children:[e.jsx(xt,{children:e.jsx(gt,{placeholder:`Select ${C.toLowerCase()}`})}),e.jsx(bt,{children:i.map((l,g)=>e.jsx(We,{value:l,children:l},g))})]});switch(N){case Ce.TEXTAREA:return e.jsx(_s,{id:p,value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,rows:3,disabled:m});case Ce.SELECT_PRIORITY:return e.jsxs(mt,{value:r||"",onValueChange:l=>n(p,l),disabled:m,children:[e.jsx(xt,{children:e.jsx(gt,{placeholder:"Select priority"})}),e.jsxs(bt,{children:[e.jsx(We,{value:Ye.LOW,children:"Low"}),e.jsx(We,{value:Ye.MEDIUM,children:"Medium"}),e.jsx(We,{value:Ye.HIGH,children:"High"})]})]});case Ce.NUMBER:return e.jsx(Fe,{id:p,type:"number",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.EMAIL:return e.jsx(Fe,{id:p,type:"email",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.PHONE:return e.jsx(Fe,{id:p,type:"tel",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.DATE:return e.jsx(Fe,{id:p,type:"date",value:r||"",onChange:l=>n(p,l.target.value),disabled:m});case Ce.URL:return e.jsx(Fe,{id:p,type:"url",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m});case Ce.CHECKBOX:return e.jsx(Xt,{id:p,checked:r||!1,onCheckedChange:l=>n(p,l),disabled:m});default:return e.jsx(Fe,{id:p,type:"text",value:r||"",onChange:l=>n(p,l.target.value),placeholder:`Enter ${C.toLowerCase()}`,disabled:m})}},Pt=({isOpen:a,onClose:r,onSubmit:n,formData:i,onFieldChange:c,columns:m,metaData:p=[],dropdownSetup:N={},columnOrder:C={},processName:l=null,isSubmitting:g=!1,counterConfig:v,setCounterConfig:M,mode:R="create",itsSplit:u})=>{const f=yt(h=>h.user),x=(f==null?void 0:f.owner_id)??(f==null?void 0:f.id),[q,te]=Gt(),[U,W]=o.useState(!1),[le,K]=o.useState(""),[j,t]=o.useState({}),[s,d]=o.useState([]),[y,_]=o.useState([]),[P,he]=o.useState({}),[_e,oe]=o.useState({}),[L,Q]=o.useState(null),[E,ge]=o.useState(null),[A,T]=o.useState(!1),[b,ce]=o.useState(!1),[ae,me]=o.useState(!1),[je,$]=o.useState([]),[B,se]=o.useState([]);o.useEffect(()=>{de()},[]);const D=f.schema_name,de=async()=>{const h=`https://click.wa.expert/api/data/getAllTables?schemaName=${D}`,{data:F}=await ye.get(h);se(F.data)};o.useEffect(()=>{a&&R==="create"&&m.length>0&&m.some(F=>F.id==="status"||F.id.toLowerCase()==="status")&&je.length>0&&(!i.status||i.status==="")&&c("status",je[0])},[a,R,m,je,i.status]);const ne=o.useMemo(()=>{const h=At(m,l);return It(h,C)},[m,l,C]),X=h=>{const F=p.find(k=>k.column_name===h);return(F==null?void 0:F.is_nullable)==="NO"},J=h=>h===ht.PA_ID,z=h=>{const F=N[h];return Array.isArray(F)?F:[]},Ne=h=>l&&(h.id.toLowerCase().includes("quantity")||h.name.toLowerCase().includes("quantity")),I=()=>{const h=window.location.pathname.split("/");return h[h.length-2]},re=(h,F)=>{const k={};return Object.entries(h).forEach(([H,pe])=>{if(pe===""||pe===null||pe===void 0)return;const Ae=F.find(G=>G.column_name===H);if(Ae){const G=Ae.data_type.toLowerCase();if(G.includes("int")||G.includes("serial")){const xe=parseInt(pe,10);isNaN(xe)||(k[H]=xe)}else if(G.includes("numeric")||G.includes("decimal")||G.includes("float")||G.includes("double")){const xe=parseFloat(pe);isNaN(xe)||(k[H]=xe)}else G.includes("bool")?k[H]=pe===!0||pe==="true"||pe==="1":(G.includes("date")||G.includes("time"),k[H]=pe)}else k[H]=pe}),k},Ie=async h=>{try{const F={schemaName:f.schema_name,tableName:h,userId:f.id,userEmail:f.email},k=await ye.post("https://click.wa.expert/api/data/getAllData",F),H=k.data.data||[],pe=k.data.columns||[];let Ae=[];if(H.length>0){const ct=H[0];Ae=Object.keys(ct).map(ze=>({id:ze,name:Pe(ze),accessor:ze,sortable:!0,visible:!0,type:Re(ct[ze],ze)}))}const G=`https://click.wa.expert/api/reference/setup/check?owner_id=${x}&product_name=${h}`,xe=await ye.get(G);let ve={},ot={},Qe=[];return xe.data.exists&&xe.data.setup&&(ve=xe.data.setup.mapping||{},ot=xe.data.setup.columnOrder||{},Qe=xe.data.setup.process_steps||[],$(Qe)),{columns:Ae,metaData:pe,dropdownSetup:ve,columnOrder:ot,processName:null,processSteps:Qe}}catch(F){throw F}},Pe=h=>h.split("_").map(F=>F.charAt(0).toUpperCase()+F.slice(1)).join(" "),Re=(h,F)=>{const k=F.toLowerCase();return k.includes("email")?"email":k.includes("phone")?"tel":k.includes("url")||k.includes("link")?"url":k==="status"?"select-status":k==="priority"?"select-priority":k.includes("description")||k.includes("notes")||k.includes("comment")?"textarea":k.includes("date")||k.includes("created")||k.includes("updated")?"date":typeof h=="number"?"number":typeof h=="boolean"?"checkbox":h&&h.length>100?"textarea":"text"},$e=async h=>{try{const F=I();let k=re(h,p);const H={process_name:q.get("process_name"),pa_id:q.get("pa_id"),status:q.get("status")};if(H.process_name){const G=`${H.process_name}_balance`,xe=m.find(ve=>ve.id.toLowerCase().includes("quantity"));if(xe){const ve=k[xe.id];ve&&(k[G]=ve)}}(H.status&&H.pa_id||H.process_name&&H.pa_id)&&(k.us_id=`${H.pa_id} -S- ${k.us_id}`);const pe={schemaName:f.schema_name,tableName:F};return await Le.createRecord(pe,k)}catch(F){throw F}},be=async(h,F)=>{try{const k=re(h,y);E&&k.us_id&&(k.us_id=`${E} -S- ${k.us_id}`);const H={schemaName:f.schema_name,tableName:F};return await Le.createRecord(H,k)}catch(k){throw k}},De=async()=>{await n()},fe=async()=>{var h,F,k,H,pe,Ae;me(!0);try{const G=await $e(i);let xe=null;if((F=(h=G==null?void 0:G.data)==null?void 0:h.data)!=null&&F.us_id)xe=G.data.data.us_id;else if(i.us_id)xe=i.us_id;else if((H=(k=G==null?void 0:G.data)==null?void 0:k.data)!=null&&H.us_id&&G.data.data.us_id.includes(" -S- ")){const ve=G.data.data.us_id.split(" -S- ");xe=ve[ve.length-1]}if(v.isActive&&v.recordId)try{await Le.updateRecord({schemaName:"public",tableName:"counter_setup"},v.recordId,x,{counter:v.counter+1}),M(ve=>({...ve,counter:ve.counter+1}))}catch{V.warning("Record created but counter increment failed")}xe?(ge(xe),V.success("Record created successfully"),W(!0)):V.error("Could not get us_id from created record")}catch(G){V.error("Failed to create record: "+(((Ae=(pe=G.response)==null?void 0:pe.data)==null?void 0:Ae.details)||G.message))}finally{me(!1)}},we=async()=>{if(le){T(!0);try{const h=await Ie(le);d(h.columns||[]),_(h.metaData||[]),he(h.dropdownSetup||{}),oe(h.columnOrder||{}),Q(h.processName||null);const F={[ht.PA_ID]:E,us_id:St()};h.columns.some(H=>H.id==="status"||H.id.toLowerCase()==="status")&&h.processSteps&&h.processSteps.length>0&&(F.status=h.processSteps[0]),h.columns.forEach(H=>{F[H.id]||(F[H.id]="")}),t(F),W(!1)}catch{V.error("Failed to load table structure. Please try again.")}finally{T(!1)}}},Oe=(h,F)=>{t(k=>({...k,[h]:F}))},He=async()=>{ce(!0);try{await be(j,le)&&(V.success("Detail record created successfully"),Te(),window.location.reload())}catch{V.error("Failed to create detail record. Please try again.")}finally{ce(!1)}},Ge=async()=>{ce(!0);try{await be(j,le)&&(V.success("Detail record created successfully"),t({}),d([]),_([]),he({}),oe({}),Q(null),K(""),W(!0))}catch{V.error("Failed to create detail record. Please try again.")}finally{ce(!1)}},Te=()=>{W(!1),K(""),t({}),d([]),_([]),he({}),oe({}),Q(null),ge(null),$([]),r()},ke=()=>e.jsxs(e.Fragment,{children:[e.jsxs(tt,{children:[e.jsx(st,{children:"Select Table for Details"}),e.jsxs(ft,{children:["Choose a table to add detail records linked to the parent record (pa_id: ",E,")"]})]}),e.jsxs("div",{className:"py-6",children:[e.jsx(Be,{htmlFor:"table-select",className:"text-sm font-medium mb-2 block",children:"Select Table"}),e.jsxs(mt,{value:le,onValueChange:K,children:[e.jsx(xt,{id:"table-select",className:"w-full",children:e.jsx(gt,{placeholder:"Choose a table..."})}),e.jsx(bt,{children:B.map(h=>e.jsx(We,{value:h.title,children:h.title.charAt(0).toUpperCase()+h.title.slice(1)},h.title))})]})]}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[e.jsx(ee,{variant:"outline",onClick:Te,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(ee,{onClick:we,disabled:!le||A,className:"w-full sm:w-auto",children:A?"Loading...":"Load Form"})]})]}),Ue=()=>e.jsxs(e.Fragment,{children:[e.jsxs(tt,{children:[e.jsx(st,{children:R==="create"?"Add New Record":"Edit Record"}),e.jsxs(ft,{children:[R==="create"?"Fill in the details to create a new record in the database.":"Update the record details.",l&&e.jsxs("span",{className:"block mt-1 text-blue-600",children:["Note: The ",l,"_balance field will be automatically set to match the quantity value."]})]})]}),e.jsx("div",{className:"space-y-6 py-4",children:ne.map(h=>{const F=C[h.id],k=J(h.id),H=X(h.id),pe=Ne(h);return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs(Be,{htmlFor:h.id,className:"font-medium text-sm sm:w-48 sm:text-right sm:flex-shrink-0 flex items-center gap-1 justify-start sm:justify-end",children:[F&&e.jsx(Se,{variant:"secondary",className:"text-xs h-4 px-1 mr-1",children:F}),e.jsx("span",{className:"flex-1 sm:flex-initial",children:h.name}),H&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 text-red-100",children:"*"}),k&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 bg-green-500 ml-1",children:"auto"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Mt,{column:h,value:i[h.id],onChange:c,dropdownOptions:z(h.id),isAutoFilled:k,disabled:g||ae}),k&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.id===ht.PA_ID?"Automatically filled from URL parameter":"Automatically generated unique identifier"}),pe&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["This value will be used to set ",l,"_balance"]})]})]},h.id)})}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[e.jsx(ee,{variant:"outline",onClick:Te,disabled:g||ae,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(ee,{onClick:De,disabled:g||ae,className:"w-full sm:w-auto",children:g?R==="create"?"Creating...":"Updating...":R==="create"?"Create Record":"Update Record"}),!u&&e.jsx(ee,{onClick:fe,disabled:g||ae,variant:"secondary",className:"w-full sm:w-auto",children:ae?"Creating...":"Create & Add Details"})]})]}),Ke=o.useMemo(()=>{const h=At(s,L);return It(h,_e)},[s,L,_e]),lt=()=>e.jsxs(e.Fragment,{children:[e.jsxs(tt,{children:[e.jsxs(st,{children:["Add Details - ",le.charAt(0).toUpperCase()+le.slice(1)]}),e.jsxs(ft,{children:["Adding detail record linked to parent (pa_id: ",E,")"]})]}),e.jsx("div",{className:"space-y-6 py-4",children:Ke.map(h=>{var Ae;const F=_e[h.id],k=h.id===ht.PA_ID,H=((Ae=y.find(G=>G.column_name===h.id))==null?void 0:Ae.is_nullable)==="NO",pe=Array.isArray(P[h.id])?P[h.id]:[];return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs(Be,{htmlFor:h.id,className:"font-medium text-sm sm:w-48 sm:text-right sm:flex-shrink-0 flex items-center gap-1 justify-start sm:justify-end",children:[F&&e.jsx(Se,{variant:"secondary",className:"text-xs h-4 px-1 mr-1",children:F}),e.jsx("span",{className:"flex-1 sm:flex-initial",children:h.name}),H&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 text-red-100",children:"*"}),k&&e.jsx(Se,{variant:"default",className:"text-xs h-4 px-1 bg-green-500 ml-1",children:"auto"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Mt,{column:h,value:j[h.id],onChange:Oe,dropdownOptions:pe,isAutoFilled:k,disabled:b}),k&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Automatically filled from parent record: ",E]})]})]},h.id)})}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[e.jsx(ee,{variant:"outline",onClick:Te,disabled:b,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(ee,{onClick:He,disabled:b,className:"w-full sm:w-auto",children:b?"Creating...":"Create Record"}),e.jsx(ee,{onClick:Ge,disabled:b,variant:"secondary",className:"w-full sm:w-auto",children:b?"Creating...":"Create & Add More Details"})]})]});return e.jsx(Nt,{open:a,onOpenChange:r,children:e.jsx(vt,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",onInteractOutside:h=>h.preventDefault(),children:U?ke():s.length>0?lt():Ue()})})},ir=({isOpen:a,onClose:r,onConfirm:n,record:i,confirmInput:c,onConfirmInputChange:m,isDeleting:p=!1})=>{const N=c.trim()===(i==null?void 0:i.us_id);return e.jsx(Nt,{open:a,onOpenChange:r,children:e.jsxs(vt,{className:"max-w-md",children:[e.jsxs(tt,{children:[e.jsxs(st,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-red-500"}),"Confirm Deletion"]}),e.jsxs(ft,{children:["This action cannot be undone. Please type the ",e.jsx("strong",{children:"us_id"})," to confirm deletion."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[i&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[e.jsx("p",{className:"text-sm font-medium",children:"Record to delete:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",i.id]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["US_ID: ",e.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:i.us_id})]})]}),e.jsxs("div",{children:[e.jsx(Be,{htmlFor:"confirm-us-id",className:"text-sm font-medium",children:"Enter us_id to confirm:"}),e.jsx(Fe,{id:"confirm-us-id",type:"text",placeholder:"Type us_id here",value:c,onChange:C=>m(C.target.value),className:"mt-1",autoFocus:!0,disabled:p})]})]}),e.jsxs(rt,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(ee,{variant:"outline",onClick:r,disabled:p,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(ee,{variant:"destructive",onClick:n,disabled:p||!N,className:"w-full sm:w-auto",children:p?"Deleting...":"Delete Record"})]})]})})};function lr({className:a,...r}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:it("mx-auto flex w-full justify-center",a),...r})}function or({className:a,...r}){return e.jsx("ul",{"data-slot":"pagination-content",className:it("flex flex-row items-center gap-1",a),...r})}function Ve({...a}){return e.jsx("li",{"data-slot":"pagination-item",...a})}function at({className:a,isActive:r,size:n="icon",...i}){return e.jsx("a",{"aria-current":r?"page":void 0,"data-slot":"pagination-link","data-active":r,className:it(cs({variant:r?"outline":"ghost",size:n}),a),...i})}function cr({className:a,...r}){return e.jsxs(at,{"aria-label":"Go to previous page",size:"default",className:it("gap-1 px-2.5 sm:pl-2.5",a),...r,children:[e.jsx(Cs,{}),e.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function dr({className:a,...r}){return e.jsxs(at,{"aria-label":"Go to next page",size:"default",className:it("gap-1 px-2.5 sm:pr-2.5",a),...r,children:[e.jsx("span",{className:"hidden sm:block",children:"Next"}),e.jsx(ds,{})]})}function ur(a=640){const[r,n]=o.useState(typeof window<"u"?window.innerWidth<a:!1);return o.useEffect(()=>{function i(){n(window.innerWidth<a)}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[a]),r}function hr({currentPage:a,setCurrentPage:r,totalPages:n,records:i=[],pageSize:c=10,totalRecords:m=0}){const N=ur(640)?3:7,C=o.useMemo(()=>{if(n<=N)return[...Array(n)].map((R,u)=>u+1);const l=Math.floor(N/2);let g=Math.max(1,a-l),v=Math.min(n,a+l);a<=l?(g=1,v=N):a+l>=n&&(g=n-N+1,v=n);const M=[];for(let R=g;R<=v;R++)M.push(R);return M},[n,a,N]);return e.jsxs("div",{className:"flex items-center justify-between mt-4 w-full px-4",children:[e.jsxs("div",{className:"hidden sm:block text-sm text-slate-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:Math.min(i.length,c)})," of"," ",e.jsx("span",{className:"font-medium",children:m})," records"]}),e.jsx("div",{className:"flex-1 flex justify-center sm:justify-end",children:e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto sm:overflow-visible py-1",children:e.jsx(lr,{children:e.jsxs(or,{children:[e.jsx(Ve,{children:e.jsx(cr,{href:"#",onClick:l=>{l.preventDefault(),a>1&&r(a-1)},className:a<=1?"pointer-events-none opacity-50":""})}),C[0]>1&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{children:e.jsx(at,{href:"#",onClick:l=>{l.preventDefault(),r(1)},isActive:a===1,children:"1"})}),e.jsx(Ve,{children:e.jsx("span",{className:"inline-flex items-center px-2",children:"â€¦"})})]}),C.map(l=>e.jsx(Ve,{children:e.jsx(at,{href:"#",onClick:g=>{g.preventDefault(),r(l)},isActive:a===l,children:l})},l)),C[C.length-1]<n&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{children:e.jsx("span",{className:"inline-flex items-center px-2",children:"â€¦"})}),e.jsx(Ve,{children:e.jsx(at,{href:"#",onClick:l=>{l.preventDefault(),r(n)},isActive:a===n,children:n})})]}),e.jsx(Ve,{children:e.jsx(dr,{href:"#",onClick:l=>{l.preventDefault(),a<n&&r(a+1)},className:a>=n?"pointer-events-none opacity-50":""})})]})})})})]})}const fr=({type:a="normal"})=>{const[r,n]=Gt(),i=yt(S=>S.user),c=o.useMemo(()=>({pa_id:r.get("pa_id"),us_id:r.get("us_id"),show:r.get("show"),status:r.get("status"),process_name:r.get("process_name")}),[r]),[m,p]=o.useState([]);o.useEffect(()=>{C()},[]);const N=i.schema_name,C=async()=>{const S=`https://click.wa.expert/api/data/getAllTables?schemaName=${N}`,{data:O}=await ye.get(S),Y=O.data.map(Z=>Z.title);p(Y)},{tableName1:l}=us(),g=o.useMemo(()=>({schemaName:i.schema_name,tableName:l,userId:i.id,userEmail:i.email}),[i.schema_name,l,i.id,i.email]),v=(i==null?void 0:i.owner_id)??(i==null?void 0:i.id),[M,R]=o.useState(!1),[u,f]=o.useState(null),[x,q]=o.useState("asc"),[te,U]=o.useState({counter:0,prefix:"",isActive:!1,recordId:null}),[W,le]=o.useState([]),[K,j]=o.useState(!1),[t,s]=o.useState(null),[d,y]=o.useState(""),[_,P]=o.useState(!1),[he,_e]=o.useState(!1),[oe,L]=o.useState({tableName:"",paId:"",columns:[],metaData:[],dropdownSetup:{},columnOrder:{},formData:{},processSteps:[]}),{originalRecords:Q,columns:E,metaData:ge,loading:A,refreshData:T}=Vs(g,a,v),{columns:b,setColumns:ce,toggleColumnVisibility:ae,resetColumnVisibility:me,hideAllColumns:je,visibleColumns:$}=Ws(v,g.tableName,g.schemaName,E),{searchTerm:B,setSearchTerm:se,statusFilter:D,priorityFilter:de,filteredRecords:ne,uniqueStatuses:X,uniquePriorities:J,toggleStatusFilter:z,togglePriorityFilter:Ne,clearFilters:I,hasActiveFilters:re}=Gs(Q),Ie=o.useCallback(S=>{u===S?q(O=>O==="asc"?"desc":"asc"):(f(S),q("asc"))},[u]),Pe=o.useMemo(()=>u?[...ne].sort((S,O)=>{const w=S[u],Y=O[u];if(w&&Y&&typeof w=="string"){const Z=Date.parse(w),ie=Date.parse(Y);if(!isNaN(Z)&&!isNaN(ie))return x==="asc"?Z-ie:ie-Z}return typeof w=="string"&&typeof Y=="string"?x==="asc"?w.localeCompare(Y):Y.localeCompare(w):x==="asc"?(w??0)-(Y??0):(Y??0)-(w??0)}):ne,[ne,u,x]),{currentPage:Re,totalPages:$e,currentRecords:be,setCurrentPage:De,resetPagination:fe}=Ks(Pe),{formData:we,isSubmitting:Oe,isOpen:He,handleFieldChange:Ge,submitForm:Te,openForm:ke,closeForm:Ue}=Xs(g,a,T),{dropdownSetup:Ke,columnOrder:lt,setupExists:h}=Ys(v,g.tableName);o.useEffect(()=>{const S=async()=>{try{const O=`https://click.wa.expert/api/reference/setup/check?owner_id=${v}&product_name=${g.tableName}`,{data:w}=await ye.get(O);w.exists&&w.setup&&w.setup.process_steps?le(w.setup.process_steps):le([])}catch{le([])}};v&&g.tableName&&S()},[v,g.tableName]);const F=async S=>{try{const O={schemaName:i.schema_name,tableName:S,userId:i.id,userEmail:i.email},w=await ye.post("https://click.wa.expert/api/data/getAllData",O),Y=w.data.data||[],Z=w.data.columns||[];let ie=[];if(Y.length>0){const kt=Y[0];ie=Object.keys(kt).map(Ze=>({id:Ze,name:k(Ze),accessor:Ze,sortable:!0,visible:!0,type:H(kt[Ze],Ze)}))}const Xe=`https://click.wa.expert/api/reference/setup/check?owner_id=${v}&product_name=${S}`,Ee=await ye.get(Xe);let Me={},Je={},Et=[];return Ee.data.exists&&Ee.data.setup&&(Me=Ee.data.setup.mapping||{},Je=Ee.data.setup.columnOrder||{},Et=Ee.data.setup.process_steps||[]),{columns:ie,metaData:Z,dropdownSetup:Me,columnOrder:Je,processName:null,processSteps:Et}}catch(O){throw O}},k=S=>S.split("_").map(O=>O.charAt(0).toUpperCase()+O.slice(1)).join(" "),H=(S,O)=>{const w=O.toLowerCase();return w.includes("email")?"email":w.includes("phone")?"tel":w.includes("url")||w.includes("link")?"url":w==="status"?"select-status":w==="priority"?"select-priority":w.includes("description")||w.includes("notes")||w.includes("comment")?"textarea":w.includes("date")||w.includes("created")||w.includes("updated")?"date":typeof S=="number"?"number":typeof S=="boolean"?"checkbox":S&&S.length>100?"textarea":"text"},pe=async(S,O)=>{try{const w=await F(S),Y={pa_id:O,us_id:St()};w.columns.some(ie=>ie.id==="status"||ie.id.toLowerCase()==="status")&&w.processSteps&&w.processSteps.length>0&&(Y.status=w.processSteps[0]),w.columns.forEach(ie=>{Y[ie.id]||(Y[ie.id]="")}),L({tableName:S,paId:O,columns:w.columns,metaData:w.metaData,dropdownSetup:w.dropdownSetup,columnOrder:w.columnOrder,formData:Y,processSteps:w.processSteps||[]}),_e(!0),V.success("Form loaded successfully")}catch(w){throw V.error("Failed to load form"),w}},Ae=(S,O)=>{L(w=>({...w,formData:{...w.formData,[S]:O}}))},G=async()=>{var S,O;try{const w={};Object.entries(oe.formData).forEach(([Z,ie])=>{if(ie!==""&&ie!==null&&ie!==void 0){const Xe=oe.metaData.find(Ee=>Ee.column_name===Z);if(Xe){const Ee=Xe.data_type.toLowerCase();if(Ee.includes("int")||Ee.includes("serial")){const Me=parseInt(ie,10);isNaN(Me)||(w[Z]=Me)}else if(Ee.includes("numeric")||Ee.includes("decimal")||Ee.includes("float")){const Me=parseFloat(ie);isNaN(Me)||(w[Z]=Me)}else Ee.includes("bool")?w[Z]=ie===!0||ie==="true"||ie==="1":w[Z]=ie}else w[Z]=ie}}),w.us_id&&w.pa_id&&(w.us_id=`${w.pa_id} -S- ${w.us_id}`);const Y={schemaName:i.schema_name,tableName:oe.tableName};await Le.createRecord(Y,w),V.success("Split record created successfully"),_e(!1),L({tableName:"",paId:"",columns:[],metaData:[],dropdownSetup:{},columnOrder:{},formData:{},processSteps:[]}),T()}catch(w){throw V.error("Failed to create split record: "+(((O=(S=w.response)==null?void 0:S.data)==null?void 0:O.details)||w.message)),w}},xe=()=>{_e(!1),L({tableName:"",paId:"",columns:[],metaData:[],dropdownSetup:{},columnOrder:{},formData:{},processSteps:[]})};o.useEffect(()=>{E.length>0&&b.length===0&&ce(E)},[E]),o.useEffect(()=>{const S=r.get("search");S&&se(decodeURIComponent(S))},[r,se]),o.useEffect(()=>{c.show==="true"&&b.length>0&&ze()},[c.show,b]);const ve=o.useCallback(S=>{U(S)},[]),ot=o.useCallback(()=>{T(),I(),fe(),V.success("Data refreshed")},[T,I,fe]),Qe=o.useCallback(S=>{se(S.target.value),fe()},[se,fe]),ct=o.useCallback(()=>{if(!ne.length){V.error("No records to export");return}try{const S=ne.map(Ee=>{const Me={};return $.forEach(Je=>{Me[Je.name]=Ee[Je.id]}),Me}),O=Ms.unparse(S,{quotes:!0,quoteChar:'"',delimiter:",",header:!0}),w=new Blob([O],{type:"text/csv;charset=utf-8;"}),Y=URL.createObjectURL(w),Z=document.createElement("a"),ie=new Date().toISOString().slice(0,10),Xe=`${g.tableName}_export_${ie}.csv`;Z.setAttribute("href",Y),Z.setAttribute("download",Xe),Z.style.display="none",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(Y),V.success(`Exported ${S.length} records to CSV`)}catch(S){ue.error("Error exporting CSV:",S),V.error("Failed to export CSV")}},[ne,$,g.tableName]),ze=o.useCallback(async()=>{const S={};if(b.forEach(O=>{c[O.id]?S[O.id]=c[O.id]:O.id==="us_id"?S[O.id]=te.isActive?`${te.prefix}${te.counter}`:St():O.id==="status"&&W.length>0?S[O.id]=W[0]:S[O.id]=""}),ke(S),c.show==="true"){const O=new URLSearchParams(r);O.delete("show"),n(O,{replace:!0})}},[b,c,te,ke,r,n,W]),Zt=o.useCallback(async()=>{try{let S={};if(c.process_name){const O=`${c.process_name}_balance`,w=b.find(Y=>Y.id.toLowerCase().includes("quantity"));if(w){const Y=we[w.id];Y&&(S[O]=Y)}}if((c.status&&c.pa_id||c.process_name&&c.pa_id)&&(S.us_id=`${c.pa_id} -S- ${we.us_id}`),await Te(S),te.isActive&&te.recordId)try{await Le.updateRecord({schemaName:"public",tableName:"counter_setup"},te.recordId,v,{counter:te.counter+1}),U(O=>({...O,counter:O.counter+1}))}catch(O){ue.error("Counter increment failed:",O),V.warning("Record created but counter increment failed")}n({})}catch(S){ue.error("Create record failed:",S)}},[we,b,c,te,Te,v,n]),es=o.useCallback(S=>{s(S),y(""),j(!0)},[]),ts=o.useCallback(async()=>{if(!t||d.trim()!==t.us_id){V.error("Entered us_id does not match");return}try{P(!0),await Le.deleteRecord(g,t.id),V.success("Record deleted successfully"),j(!1),s(null),y(""),T()}catch(S){ue.error("Delete failed:",S),V.error("Failed to delete record")}finally{P(!1)}},[t,d,g,T]),ss=o.useCallback(async(S,O)=>{try{const w=Q.find(Z=>Z.id===S),Y={};if(Object.entries(O).forEach(([Z,ie])=>{ie!==w[Z]&&Z!=="id"&&Z!=="pa_id"&&Z!=="us_id"&&(Y[Z]=ie)}),Object.keys(Y).length===0){V.warning("No changes to save");return}await Le.updateRecord(g,S,v,Y),V.success("Record updated successfully"),T()}catch(w){ue.error("Update failed:",w),V.error("Failed to update record")}},[Q,g,v,T]);return c.show==="true"?null:e.jsxs($t,{className:"tableCard shadow-sm border-slate-200 mx-[6rem]",children:[e.jsx(Ut,{className:"pb-3",children:e.jsx(Js,{title:"All Records - "+g.tableName,description:"View and manage all database records",searchTerm:B,onSearchChange:Qe,tableName:g.tableName,onCounterUpdate:ve,urlParams:c,dropdownSetupExists:h,columnOrderExists:Object.keys(lt).length>0})}),e.jsxs(qt,{children:[e.jsx("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(sr,{onRefresh:ot,onAddRecord:ze,onExportCSV:ct,onToggleEdit:()=>R(!M),editEnabled:M,canEdit:i.owner_id===null,isLoading:A,splitOptions:m,onSplitLoad:pe}),e.jsx(rr,{uniqueStatuses:X,uniquePriorities:J,statusFilter:D,priorityFilter:de,onToggleStatus:z,onTogglePriority:Ne,onClearStatusFilter:()=>z([]),onClearPriorityFilter:()=>Ne([])}),e.jsx(ar,{columns:b,onToggleColumn:ae,onResetVisibility:me,onHideAll:je})]})}),e.jsx(nr,{records:be,columns:b,loading:A,editEnabled:M,canDelete:i.owner_id===null,onSort:Ie,onDeleteRecord:es,onSaveRecord:ss,sortColumn:u,sortDirection:x,emptyMessage:re?"No records match filters":"No records found",onClearFilters:re?I:null}),e.jsx(hr,{currentPage:Re,setCurrentPage:De,totalPages:$e})]}),e.jsx(Pt,{isOpen:He,onClose:Ue,onSubmit:Zt,formData:we,onFieldChange:Ge,columns:b,metaData:ge,dropdownSetup:Ke,columnOrder:lt,processName:c.process_name,isSubmitting:Oe,counterConfig:te,setCounterConfig:U,mode:"create",processSteps:W}),e.jsx(Pt,{isOpen:he,onClose:xe,onSubmit:G,formData:oe.formData,onFieldChange:Ae,columns:oe.columns,metaData:oe.metaData,dropdownSetup:oe.dropdownSetup,columnOrder:oe.columnOrder,processName:null,isSubmitting:Oe,counterConfig:te,setCounterConfig:U,mode:"create",itsSplit:!0,processSteps:oe.processSteps||[]}),e.jsx(ir,{isOpen:K,onClose:()=>j(!1),onConfirm:ts,record:t,confirmInput:d,onConfirmInputChange:y,isDeleting:_})]})},Or=a=>e.jsx(As,{children:e.jsx(fr,{...a})});export{Or as default};
