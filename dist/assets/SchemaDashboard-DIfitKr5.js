import{R as v,r as b,j as e,a as R,C as M,g as $,D,h as H,i as J,k as W,L as A,I as T,S as V,l as q,o as E,p as U,q as X,t as Q,v as Y,w as ee,B as g,X as te,P as ae,x as se,y as le,c as re,u as ne,z as ie,m as I,n as B,E as ce,A as de,F as oe}from"./index-DSK3H15k.js";/* empty css                     */import{T as _,a as F,b as y,c as o,d as O,e as u}from"./table-BRGksd4x.js";import{C as ue}from"./checkbox-DzHwqFVk.js";import{J as me}from"./JobStatusReportDataStore-C9M8VG5O.js";import{T as he}from"./table-2woSVqqt.js";var G={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},L=v.createContext&&v.createContext(G),xe=["attr","size","title"];function pe(t,a){if(t==null)return{};var s=je(t,a),l,i;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(i=0;i<f.length;i++)l=f[i],!(a.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(s[l]=t[l])}return s}function je(t,a){if(t==null)return{};var s={};for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){if(a.indexOf(l)>=0)continue;s[l]=t[l]}return s}function S(){return S=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},S.apply(this,arguments)}function Z(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);a&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,l)}return s}function k(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?Z(Object(s),!0).forEach(function(l){be(t,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Z(Object(s)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(s,l))})}return t}function be(t,a,s){return a=fe(a),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function fe(t){var a=ge(t,"string");return typeof a=="symbol"?a:a+""}function ge(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var l=s.call(t,a);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function K(t){return t&&t.map((a,s)=>v.createElement(a.tag,k({key:s},a.attr),K(a.child)))}function Ne(t){return a=>v.createElement(ve,S({attr:k({},t.attr)},a),K(t.child))}function ve(t){var a=s=>{var{attr:l,size:i,title:f}=t,w=pe(t,xe),x=i||s.size||"1em",p;return s.className&&(p=s.className),t.className&&(p=(p?p+" ":"")+t.className),v.createElement("svg",S({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,l,w,{className:p,style:k(k({color:t.color||s.color},s.style),t.style),height:x,width:x,xmlns:"http://www.w3.org/2000/svg"}),f&&v.createElement("title",null,f),t.children)};return L!==void 0?v.createElement(L.Consumer,null,s=>a(s)):a(G)}function ye(t){return Ne({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}const we=["Text (String)","Number","Date","Boolean"],Ce=({setShowDialog:t})=>{const[a,s]=b.useState(""),[l,i]=b.useState([{name:"",type:"Text (String)",label:"",defaultValue:""}]),[f,w]=b.useState(!1),x=(m,h,d)=>{const n=[...l];n[m][h]=d,i(n)},p=()=>{i([...l,{name:"",type:"Text (String)",label:"",defaultValue:""}])},C=m=>{const h=l.filter((d,n)=>n!==m);i(h)},N=()=>{};return e.jsx("div",{className:"wrapper",children:e.jsxs("div",{className:"new-data-store",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{children:"New Data Store"}),e.jsx("button",{style:{background:"pink",border:"none",width:"2.5rem",borderRadius:"1.25rem",height:"2.5rem",fontSize:"1.2rem"},onClick:()=>t(0),children:e.jsx(ye,{})})]}),e.jsx("input",{type:"text",placeholder:"Enter Data Store Title",value:a,onChange:m=>s(m.target.value),className:"input title-input"}),e.jsx("h4",{children:"Data Store Fields"}),l.map((m,h)=>e.jsxs("div",{className:"field-row",children:[e.jsx("input",{type:"text",placeholder:"Enter Field Name",value:m.name,onChange:d=>x(h,"name",d.target.value),className:"input"}),e.jsx("select",{value:m.type,onChange:d=>x(h,"type",d.target.value),className:"select",children:we.map(d=>e.jsx("option",{children:d},d))}),e.jsx("input",{type:"text",placeholder:"Enter Label",value:m.label,onChange:d=>x(h,"label",d.target.value),className:"input"}),e.jsx("input",{type:"text",placeholder:"Enter Default Value",value:m.defaultValue,onChange:d=>x(h,"defaultValue",d.target.value),className:"input"}),e.jsx("button",{className:"remove-btn",onClick:()=>C(h),children:"âœ•"})]},h)),e.jsx("div",{className:"add-field",onClick:p,children:"Add Field"}),e.jsx("button",{className:"submit-btn",onClick:N,children:"Create Data Store"})]})})},Te=["Text","Number","Date","Boolean"],z=[{name:"id",type:"Number",label:"ID",defaultValue:"Auto",locked:!0},{name:"task_name",type:"Text",label:"Task Name",defaultValue:"-",locked:!0},{name:"task_file",type:"Text",label:"Task File",defaultValue:"-",locked:!0},{name:"notes",type:"Text",label:"Notes",defaultValue:"-",locked:!0},{name:"assigned_to",type:"Text",label:"Assigned To",defaultValue:"-",locked:!0},{name:"assigned_by",type:"Text",label:"Assigned By",defaultValue:"-",locked:!0},{name:"department",type:"Text",label:"Department",defaultValue:"-",locked:!0},{name:"priority",type:"Text",label:"Priority",defaultValue:"-",locked:!0},{name:"status",type:"Text",label:"Status",defaultValue:"Pending",locked:!0},{name:"due_date",type:"Date",label:"Due Date",locked:!0},{name:"auditor_date",type:"Date",label:"Auditor Date",locked:!0},{name:"completion_date",type:"Date",label:"Completion Date",locked:!0},{name:"rating",type:"Text",label:"Rating",defaultValue:"-",locked:!0},{name:"pending_to_auditor_remarks",type:"Text",label:"Auditor Remarks",defaultValue:"-",locked:!0},{name:"auditor_to_completed_remarks",type:"Text",label:"Completed Remarks",defaultValue:"-",locked:!0}],Se=({setShowDialog:t})=>{const[a,s]=b.useState(""),[l,i]=b.useState([]),[f,w]=b.useState(!1),x=R(n=>n.user),p=x.id,C=x.schema_name,N=(n,c,r)=>{const j=[...l];j[n][c]=r,i(j)},m=()=>{i([...l,{name:"",type:"Text",label:"",defaultValue:""}])},h=n=>{const c=l.filter((r,j)=>j!==n);i(c)},d=async()=>{const n=[...z,...l],c={table_name:a,fields:n,schema_name:C,id:p};try{const r=await re.post("https://click.wa.expert/api/secure/createTable",c);alert("Form submitted successfully!"),t(0)}catch{alert("Creation failed! Please try again.")}};return e.jsxs(M,{className:"w-full max-w-4xl mx-auto shadow-md",children:[e.jsxs($,{className:"pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-[#4285B4]"}),e.jsx(H,{children:"New Data Store"})]}),e.jsx(J,{children:"Configure your task management data store with custom fields"})]}),e.jsx(W,{className:"pt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"title",children:"Data Store Title"}),e.jsx(T,{id:"title",placeholder:"Enter Data Store Title",value:a,onChange:n=>s(n.target.value),className:"max-w-md"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{id:"showInChat",checked:f,onCheckedChange:w}),e.jsx(A,{htmlFor:"showInChat",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Show in Chat Interface"})]}),e.jsx(V,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Predefined Fields"}),e.jsxs(q,{variant:"outline",className:"bg-slate-100",children:[e.jsx(E,{className:"h-3 w-3 mr-1"})," Locked"]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(_,{children:[e.jsx(F,{children:e.jsxs(y,{children:[e.jsx(o,{children:"Field Name"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Label"}),e.jsx(o,{children:"Default Value"}),e.jsx(o,{className:"w-[50px]"})]})}),e.jsx(O,{children:z.map((n,c)=>e.jsxs(y,{className:"bg-slate-50/50",children:[e.jsx(u,{className:"font-medium text-slate-500",children:n.name}),e.jsx(u,{className:"text-slate-500",children:n.type}),e.jsx(u,{className:"text-slate-500",children:n.label}),e.jsx(u,{className:"text-slate-500",children:n.defaultValue||"-"}),e.jsx(u,{children:e.jsx(E,{className:"h-3.5 w-3.5 text-slate-400"})})]},c))})]})})]}),e.jsx(V,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Custom Fields"}),l.length>0?e.jsx("div",{className:"rounded-md border mb-4",children:e.jsxs(_,{children:[e.jsx(F,{children:e.jsxs(y,{children:[e.jsx(o,{children:"Field Name"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Label"}),e.jsx(o,{children:"Default Value"}),e.jsx(o,{className:"w-[80px]",children:"Actions"})]})}),e.jsx(O,{children:l.map((n,c)=>e.jsxs(y,{children:[e.jsx(u,{children:e.jsx(T,{placeholder:"Field Name",value:n.name,onChange:r=>N(c,"name",r.target.value)})}),e.jsx(u,{children:e.jsxs(U,{value:n.type,onValueChange:r=>N(c,"type",r),children:[e.jsx(X,{className:"w-full",children:e.jsx(Q,{placeholder:"Type"})}),e.jsx(Y,{children:Te.map(r=>e.jsx(ee,{value:r,children:r},r))})]})}),e.jsx(u,{children:e.jsx(T,{placeholder:"Label",value:n.label,onChange:r=>N(c,"label",r.target.value)})}),e.jsx(u,{children:e.jsx(T,{placeholder:"Default Value",value:n.defaultValue,onChange:r=>N(c,"defaultValue",r.target.value)})}),e.jsx(u,{children:e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>h(c),className:"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-50",children:e.jsx(te,{className:"h-4 w-4"})})})]},c))})]})}):e.jsxs("div",{className:"text-center py-8 border rounded-md bg-slate-50",children:[e.jsx("p",{className:"text-slate-500",children:"No custom fields added yet"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:'Click "Add Field" to create custom fields'})]}),e.jsxs(g,{variant:"outline",onClick:m,className:"gap-2 mt-2",children:[e.jsx(ae,{className:"h-4 w-4"})," Add Field"]})]})]})}),e.jsxs(se,{className:"flex justify-between border-t pt-4 mt-6",children:[e.jsx(g,{variant:"outline",onClick:()=>t(0),children:"Cancel"}),e.jsxs(g,{onClick:d,className:"gap-2 bg-[#4285B4] hover:bg-[#3778b4]",disabled:!a,children:[e.jsx(le,{className:"h-4 w-4"})," Create Data Store"]})]})]})},Ae=()=>{const[t,a]=b.useState(""),s=ne(),[l,i]=b.useState(0),[f,w]=b.useState(!0),[x,p]=b.useState([]),C={1:e.jsx(Ce,{setShowDialog:i}),2:e.jsx(Se,{setShowDialog:i}),8:e.jsx(me,{setShowDialog:i})},m=R(r=>r.user).id,h=["task_management","expense_status","lead_status","project_status","support_status","birthday_status","job_status"],n=[{id:"1",title:"Task Management",tableName:"taskstatus",fieldsCount:4,createdAt:"2024-10-18T15:35:00Z",updatedAt:"2024-10-18T15:35:00Z"},{id:"2",title:"Expense Tracker",tableName:"expensestatus",fieldsCount:4,createdAt:"2024-10-18T15:35:00Z",updatedAt:"2024-10-18T15:35:00Z"},{id:"3",title:"Lead Management",tableName:"leadstatus",fieldsCount:4,createdAt:"2024-10-18T15:35:00Z",updatedAt:"2024-10-18T15:35:00Z"},{id:"4",title:"Project Management",tableName:"projectstatus",fieldsCount:4,createdAt:"2024-10-18T15:35:00Z",updatedAt:"2024-10-18T15:35:00Z"},{id:"5",title:"Support Ticket",tableName:"supportstatus",fieldsCount:4,createdAt:"2024-10-18T15:35:00Z",updatedAt:"2024-10-18T15:35:00Z"},{id:"6",title:"Birthday Reminder",tableName:"birthdaystatus",fieldsCount:4,createdAt:"2024-10-18T15:35:00Z",updatedAt:"2024-10-18T15:35:00Z"},{id:"7",title:"Job Status Report",tableName:"jobstatus",fieldsCount:8,createdAt:"2024-10-18T15:35:00Z",updatedAt:"2024-10-18T15:35:00Z"}].filter(r=>r.title.toLowerCase().includes(t.toLowerCase())),c=r=>{const j=new Date(r);return{date:j.toLocaleDateString(),time:j.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}};return e.jsx(e.Fragment,{children:e.jsxs(M,{className:"tableCard shadow-sm border-slate-200 mx-[6rem]",children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-2xl font-semibold text-slate-700",children:"All Products"}),e.jsx(J,{className:"mt-1",children:"Manage your data stores and schemas"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400"}),e.jsx(T,{type:"text",placeholder:"Search data store...",value:t,onChange:r=>a(r.target.value),className:"pl-9 w-full sm:w-[250px]"})]}),e.jsxs(g,{className:"gap-2 bg-[#4285B4] hover:bg-[#3778b4]",onClick:()=>s("/db/custom"),children:[e.jsx(he,{className:"h-4 w-4"})," Custom Table"]})]})]})}),e.jsxs(W,{children:[C[l]||null,e.jsxs(_,{children:[e.jsx(F,{children:e.jsxs(y,{children:[e.jsx(o,{children:"Schema Title"}),e.jsx(o,{className:"text-center",children:"Number of Fields"}),e.jsx(o,{children:"Created at"}),e.jsx(o,{children:"Last Updated at"}),e.jsx(o,{className:"text-right",children:"Actions"})]})}),e.jsx(O,{children:n.map(r=>{const j=c(r.createdAt),P=c(r.updatedAt);return e.jsxs(y,{children:[e.jsx(u,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center h-9 w-9 rounded bg-[#4285B4]/10",children:e.jsx(D,{className:"h-4 w-4 text-[#4285B4]"})}),r.title]})}),e.jsx(u,{className:"text-center",children:e.jsxs(q,{variant:"outline",className:"bg-slate-50",children:[r.fieldsCount," fields"]})}),e.jsxs(u,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:j.date})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-2 ml-6",children:[e.jsx(B,{className:"h-3 w-3"}),j.time]})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:P.date})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-2 ml-6",children:[e.jsx(B,{className:"h-3 w-3"}),P.time]})]}),e.jsx(u,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(g,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Browse",onClick:()=>s(`/${r.tableName}/record`),children:e.jsx(ce,{className:"h-4 w-4 text-slate-600"})}),e.jsx(g,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Edit",onClick:()=>s(`/db/${m}/${h[parseInt(r.id)-1]}`),children:e.jsx(de,{className:"h-4 w-4 text-slate-600"})}),e.jsx(g,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Setup",onClick:()=>s(`/db/setup/${r.tableName}`),children:e.jsx(oe,{className:"h-4 w-4 text-red-500"})})]})})]},r.id)})})]}),n.length===0&&e.jsxs("div",{className:"text-center py-12 text-slate-500",children:[e.jsx(D,{className:"h-12 w-12 mx-auto mb-4 text-slate-300"}),e.jsx("p",{children:"No data stores found"}),e.jsx("p",{className:"text-sm mt-2",children:"Try a different search term or create a new data store"})]})]})]})})};export{Ae as default};
