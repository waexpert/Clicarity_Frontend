import{e as h,r as l,a as M,ab as B,j as o,L as g,X as U,I as L,c as R}from"./index-BM71wYC_.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],P=h("cloud-upload",N);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],E=h("file",W);function q(){const[x,y]=l.useState(""),[a,d]=l.useState(null),[b,S]=l.useState(!1),[p,m]=l.useState(!1),[j,c]=l.useState(!1),r=w(),v=M(e=>e.user);function w(){const e=new URLSearchParams(B().search),n={};for(const[i,s]of e.entries())n[i]=s;return n}const k=async()=>{const n=await(await fetch("https://click.wa.expert/api/service/uploadFile")).json();if(!n.message)throw new Error("Presigned URL not returned");return n.message},C=async(e,n)=>{if(!(await fetch(n,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok)throw new Error("Upload to S3 failed");return n.split("?")[0]},u=e=>{e.preventDefault(),e.stopPropagation(),e.type==="dragenter"||e.type==="dragover"?c(!0):e.type==="dragleave"&&c(!1)},I=e=>{e.preventDefault(),e.stopPropagation(),c(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&d(e.dataTransfer.files[0])},z=e=>{e.target.files&&e.target.files[0]&&d(e.target.files[0])},A=()=>{d(null)},D=async e=>{e.preventDefault();try{m(!0);let n="";if(a){const T=await k();n=await C(a,T)}const s=`https://click.wa.expert/api/data/updateMultiple?${new URLSearchParams({...r,schemaName:v.schema_name,tableName:r.tableName,recordId:r.recordId,ownerId:r.ownerId,col1:r.columnName,val1:n,col2:r.commentColumnName,val2:x}).toString()}`;await R.get(s),S(!0)}catch{}finally{m(!1)}},F=e=>{if(e===0)return"0 Bytes";const n=1024,i=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(2))+" "+i[s]};return o.jsxs("div",{style:t.container,children:[o.jsx("img",{src:"https://clicarity.s3.eu-north-1.amazonaws.com/logo.png",alt:"logo",style:t.logo}),o.jsx("h2",{style:t.heading,children:"Please Enter Comment / Notes & File"}),o.jsxs("form",{onSubmit:D,style:t.form,children:[o.jsxs("div",{style:{...t.uploadArea,...j?t.uploadAreaActive:{},...a?t.uploadAreaWithFile:{}},onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:I,children:[o.jsx("input",{type:"file",id:"fileUpload",onChange:z,style:t.hiddenInput}),a?o.jsxs("div",{style:t.filePreview,children:[o.jsx(E,{size:32,style:t.fileIcon}),o.jsxs("div",{style:t.fileInfo,children:[o.jsx("p",{style:t.fileName,children:a.name}),o.jsx("p",{style:t.fileSize,children:F(a.size)})]}),o.jsx("button",{type:"button",onClick:A,style:t.removeButton,children:o.jsx(U,{size:16})})]}):o.jsxs(g,{htmlFor:"fileUpload",style:t.uploadLabel,children:[o.jsx(P,{size:48,style:t.uploadIcon}),o.jsxs("div",{style:t.uploadText,children:[o.jsx("p",{style:t.uploadMainText,children:"Click to upload or drag and drop"}),o.jsx("p",{style:t.uploadSubText,children:"Any file type supported"})]})]})]}),o.jsxs("div",{style:t.inputGroup,children:[o.jsx(g,{htmlFor:"comment",style:t.inputLabel,children:"Comment / Notes"}),o.jsx(L,{type:"text",id:"comment",placeholder:"Enter your comment or notes here...",value:x,onChange:e=>y(e.target.value),style:t.commentInput})]}),o.jsx("button",{type:"submit",style:{...t.button,...p?t.buttonDisabled:{}},disabled:p,children:p?o.jsxs("div",{style:t.buttonContent,children:[o.jsx("div",{style:t.spinner}),"Uploading..."]}):"Submit"})]}),b&&o.jsx("div",{style:t.successMessage,children:o.jsx("p",{children:"Submitted successfully. Thank you!"})})]})}const t={container:{maxWidth:"500px",margin:"50px auto",padding:"30px",border:"1px solid #e1e5e9",borderRadius:"16px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#ffffff",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},logo:{width:"22rem",height:"auto",marginBottom:"1.5rem"},heading:{textAlign:"center",marginBottom:"30px",color:"#2d3748",fontWeight:"600",fontSize:"20px",lineHeight:"1.4"},form:{display:"flex",flexDirection:"column",width:"100%",gap:"20px"},uploadArea:{border:"2px dashed #cbd5e0",borderRadius:"12px",padding:"40px 20px",textAlign:"center",backgroundColor:"#f7fafc",transition:"all 0.3s ease",cursor:"pointer",position:"relative",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},uploadAreaActive:{borderColor:"#4388c1",backgroundColor:"#ebf8ff",transform:"scale(1.02)"},uploadAreaWithFile:{borderColor:"#48bb78",backgroundColor:"#f0fff4",borderStyle:"solid"},hiddenInput:{display:"none"},uploadLabel:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",cursor:"pointer",width:"100%"},uploadIcon:{color:"#4388c1",marginBottom:"8px"},uploadText:{textAlign:"center"},uploadMainText:{fontSize:"16px",fontWeight:"600",color:"#2d3748",margin:0,marginBottom:"4px"},uploadSubText:{fontSize:"14px",color:"#718096",margin:0},filePreview:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"8px"},fileIcon:{color:"#48bb78",flexShrink:0},fileInfo:{flex:1,textAlign:"left"},fileName:{fontSize:"14px",fontWeight:"600",color:"#2d3748",margin:0,marginBottom:"2px",wordBreak:"break-word"},fileSize:{fontSize:"12px",color:"#718096",margin:0},removeButton:{background:"#fed7d7",border:"none",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#e53e3e",flexShrink:0,transition:"background-color 0.2s ease"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},inputLabel:{fontSize:"14px",fontWeight:"600",color:"#2d3748"},commentInput:{padding:"12px 16px",borderRadius:"8px",border:"1px solid #cbd5e0",fontSize:"14px",transition:"border-color 0.2s ease",outline:"none"},button:{padding:"14px 24px",fontSize:"16px",fontWeight:"600",border:"none",borderRadius:"8px",backgroundColor:"#4388c1",color:"#ffffff",cursor:"pointer",transition:"all 0.2s ease",outline:"none",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"48px"},buttonDisabled:{backgroundColor:"#a0aec0",cursor:"not-allowed"},buttonContent:{display:"flex",alignItems:"center",gap:"8px"},spinner:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"},successMessage:{marginTop:"20px",padding:"12px 20px",backgroundColor:"#c6f6d5",border:"1px solid #9ae6b4",borderRadius:"8px",color:"#22543d",fontSize:"14px",fontWeight:"500",textAlign:"center"}},f=document.createElement("style");f.type="text/css";f.innerText=`
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
`;document.head.appendChild(f);export{q as default};
